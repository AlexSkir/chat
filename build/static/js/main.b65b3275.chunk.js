(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,a){e.exports=a.p+"static/media/sound.13620510.mp3"},156:function(e,t,a){},210:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAABrVBMVEVHcEyZZpmNbaD/AP+NbJ+NbZ+Kbp+NbJ+NbZ+AgKqObJ+NbJ6NbJ+NbJ+NbJ+LbaCQcKGQcqSQcaOZZpmAgICYg6+NbJ+MbJ+Oa6CRcKGObqCNbaCOb6GOaKGPcKOJbZuObKCNbJ+Kap+MbaCNbJ+NbKCNbZ+MbZ+NbJ+NbZ+VapWqVaqObJ+ObZ+OcZyMbKCNbKCMbKCZeKGNbKCNbJ+NbJ/CzefO2e2st9D5467qzZjI0+rEz+iUfqvN2O3k6vSag7DV3u/M1+2chrKZgrDi6POchLHa4/Hfx6rS2+7j6fTDzufv1aCZg7D44azDzujU3O3e5PKXdp7P2u2bhbGzvtelpcSUfKqorsr54q7exqrq06yig6Hsz5rU3O7a4vHS3e/T3O3X4PDV3e7X3/DrzpmahLDny5jrzpq5mZzR3O62t9a4mpyst8++yuSuudGtuNHAy+WtudGuuNG9vdqjosKhnb+PcaKlp8Wqss2QdKSnq8mSeaiWhK6Xg66psMuTfamsttCPcKKqtM2pi6Ogm76niKO1maWVdKDmz6uObp/hyaqjhKL03a3ZwKq6p+DbAAAANXRSTlMABW4BwLwl5YgGh4nm6dRLqFz1CgK9wc8rff3J/Rv+HOTiGFvu2496+soMAy3+ErvTdvzz8XV3z8kAAAJrSURBVFjD7ZdVe9swFEBTtDNmZma+kWGZnSVNU9hKK60dMzNTx7zfPFlzHNvylSVvD3vofZBBOueTLFnfVS43Hf9F5GfOAqXQ9HxEoINy6BGBBjcK4rAJIXb9hpCHoEUEAGr8kcMASgKOLygIek4n8AqCnnNOF88rCC44Tvd5jrcVhtDVfZbnibzAJhcTeHlBwvdjt7ICjJcVoLykAOdxQYX/bdyCXfWu5RCPC1xecMwmZe96OcTLDEHQfymBmE8XpPAktjNxgjSexHYm4Sz8mYkoTwWWZZlmzd+ZhLPAZsLjzzR42xeY/reIDiHW/6N+/0tOKeALIgHGdzgdpTovEiB8p+NFp8+jgv4+hA/1gNUign5nYAjhg2/AajFB38B1lKejaPCYwB4S8CTEIwJ0/ByfKKicoC1c11tNZXpX9f5/9q5arhestuIiAgC2wtimzxar/44Ehe2/SxLcG74PYBiGVHF3+DYneGAYxaIhXdzhBIZixAQajKjxIzAYEYRSnNFbrMXbYkqKcy0iyOtaUDPGBB/F+ODNK5Z1qSFoxAJ44fFj72BjsF9aSPQmCBatgGeUfz8KbS1pglPHEwTL4Anl30zB+g05seBqr8dzgmZ4ZRiPnsO69tCWbwoiLlgKj5++Bli5NpdNMBfgJcCq5U2RJLSG87VYwjmHztCaxauFafCHcQqOf6o/zog0bp09b/7CeCIeWiMsTlLBBJJ0S8QW+EwF32F71pNB+7bdtAtfYV/ms4UOBybMn98OtmQVNLXCl1/mJOzK3IUdewF+TMLW7AeknfsP0QnY/DdnrD3NbZuWTB81/2X8BlOCJK5wgIZZAAAAAElFTkSuQmCC"},229:function(e,t,a){e.exports=a(468)},238:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){},243:function(e,t,a){},244:function(e,t,a){},245:function(e,t,a){},467:function(e,t,a){},468:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(8),o=a.n(i),s=a(31),r=(a(238),a(21)),l=a(22),m=a(24),u=a(23),d=a(25),h=a(37),p=a(47),g=a(15),f=a.n(g),v=(a(239),a(210)),b=a.n(v),E=a(502),N=a(503),y=a(221),k=Object(y.a)({palette:{primary:{light:"#e7f2ff",main:"#b4bff1",dark:"#838fbe",contrastText:"#292733"},secondary:{light:"#524f5c",main:"#454153",dark:"#292733",contrastText:"#fce8c5"},golden:{light:"#ffffc5",main:"#fad694",dark:"#c6a565",contrastText:"#292733"},success:{light:"#e6ffe6",main:"#2ac92a",dark:"#288028"},fail:{light:"#fff7f5",main:"#f54922",dark:"#b53c21"}}});function w(e){return c.a.createElement(E.a,{theme:k},c.a.createElement(N.a,{variant:"contained",color:"secondary",style:{outline:"none"},onClick:e.showInputOnClick},"Log In"))}var O=a(66),C=a(103),j=a(67),S=a(5),A=a(505),I=a(511),x=a(506),H=Object(S.a)({root:{"& label.Mui-focused":{color:k.palette.primary.contrastText},"& .MuiInput-underline:after":{borderBottomColor:k.palette.secondary.dark},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:k.palette.primary.dark,color:k.palette.primary.contrastText},"&:hover fieldset":{borderColor:k.palette.secondary.dark},"&.Mui-focused fieldset":{borderColor:k.palette.secondary.dark}}}})(I.a),M=Object(A.a)(function(){return{root:{position:"absolute"},iconHover:{cursor:"pointer",position:"absolute",top:"31px",right:"5px",color:k.palette.primary.dark,"&:hover":{color:k.palette.secondary.light},"&:active":{color:k.palette.secondary.dark}}}});function B(e){var t,a=M(),n=c.a.useState({name:""}),i=Object(j.a)(n,2),o=i[0],s=i[1];return c.a.createElement("form",{style:{position:"absolute",right:"13px",top:"47px",zIndex:10}},c.a.createElement(H,{id:"inputLogin",label:"Name",value:o.name,onChange:(t="name",function(e){s(Object(C.a)({},o,Object(O.a)({},t,e.target.value)))}),onKeyPress:function(t){13!==t.which&&13!==t.keyCode&&"enter"!==t.key||e.getInputLogin()},margin:"normal",variant:"outlined",style:{backgroundColor:k.palette.primary.light}}),c.a.createElement(x.a,{className:a.iconHover,onClick:e.getInputLogin},"send"))}var K=a(220),T=a(211),z=a.n(T),L=a(512),P=a(507),J=a(508),D=a(213),Z=a.n(D),G=a(215),R=a.n(G),W=a(212),q=a.n(W),F=(a(240),Object(S.a)({paper:{border:"1px solid ".concat(k.palette.secondary.light),backgroundColor:k.palette.primary.light,color:k.palette.primary.contrastText}})(function(e){return c.a.createElement(K.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),V=Object(S.a)(function(){return{root:{"&:focus":{backgroundColor:k.palette.primary.dark,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:k.palette.primary.contrastText}}}}})(L.a);function Y(e){var t=c.a.useState(null),a=Object(j.a)(t,2),n=a[0],i=a[1];return c.a.createElement("div",null,c.a.createElement(E.a,{theme:k},c.a.createElement(N.a,{"aria-controls":"customized-menu","aria-haspopup":"true",variant:"contained",color:"secondary",onClick:function(e){i(e.currentTarget)},style:{outline:"none"}},e.name,c.a.createElement(z.a,{style:{marginRight:"-10px"}})),c.a.createElement(F,{id:"customized-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:function(){i(null)}},c.a.createElement(V,{onClick:function(){i(null),e.editNameHandler()}},c.a.createElement(P.a,null,c.a.createElement(q.a,null)),c.a.createElement(J.a,{primary:"Change Name"})),c.a.createElement(V,{onClick:function(){i(null)}},c.a.createElement(P.a,null,c.a.createElement(Z.a,null)),c.a.createElement(h.b,{to:"/chat",className:"menu-links"},c.a.createElement(J.a,{primary:"Join Chat"}))),c.a.createElement(V,{onClick:function(){i(null),e.logOutHandler()}},c.a.createElement(P.a,null,c.a.createElement(R.a,null)),c.a.createElement(h.b,{to:"/",className:"menu-links"},c.a.createElement(J.a,{primary:"Log Out"}))))))}var U,X=a(222),Q=a(99),_={login:localStorage.getItem("login")||"Guest",messages:["loading"],activeInput:!1,status:3,newMessage:localStorage.getItem("newMes")||"new message!",switch:void 0!==JSON.parse(localStorage.getItem("switch"))&&JSON.parse(localStorage.getItem("switch"))},$=[];var ee=Object(Q.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login":return localStorage.setItem("login",t.value),Object.assign({},e,{login:t.value});case"switch":return localStorage.setItem("switch",t.value),Object.assign({},e,{switch:t.value});case"newMessage":return Object.assign({},e,{newMessage:t.value});case"messages":return 0!==$.length?($.map(function(e){e.id&&$.every(function(e){return e.id!==t.value[0].id})?(U=t.value[0],$.push(U),$.slice(0,100)):e.id||console.log(e)}),Object.assign({},e,{messages:Object(X.a)($)})):($=t.value,Object.assign({},e,{messages:$}));case"activeInput":return Object.assign({},e,{activeInput:t.value});case"status":return Object.assign({},e,{status:t.value});default:return e}}),te=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={name:"",active:!1,isLoggedIn:!1,error:!1},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){"Guest"!==this.props.login&&this.setState({name:this.props.login,isLoggedIn:!0})}},{key:"showInput",value:function(){this.state.active?(this.setState({active:!1}),ee.dispatch({type:"activeInput",value:!1})):(this.setState({active:!0}),ee.dispatch({type:"activeInput",value:!0}))}},{key:"inputOnChange",value:function(){var e=f()("#inputLogin").val();e&&e.length<=20?(ee.dispatch({type:"login",value:e}),ee.dispatch({type:"activeInput",value:!1}),this.setState({active:!1,isLoggedIn:!0,name:e,error:!1})):this.setState({error:!0})}},{key:"input",value:function(){var e=this;if(this.props.activeInput)return c.a.createElement(B,{getInputLogin:function(t){return e.inputOnChange(t)}})}},{key:"logOutOnClick",value:function(){ee.dispatch({type:"login",value:"Guest"}),this.setState({isLoggedIn:!1})}},{key:"accountButton",value:function(){var e=this;return this.state.isLoggedIn?c.a.createElement(Y,{name:this.state.name,editNameHandler:function(){return ee.dispatch({type:"activeInput",value:!0})},logOutHandler:function(){return e.logOutOnClick()}}):c.a.createElement(w,{showInputOnClick:function(){return e.showInput()}})}},{key:"render",value:function(){return c.a.createElement("div",{className:"row header justify-content-between align-items-center"},c.a.createElement(h.b,{className:"col-auto icon-block",to:"/"},c.a.createElement("img",{className:"header-img d-none d-sm-block",src:b.a,alt:""}),c.a.createElement("h5",{className:"icon-name"},"Awesome Chat")),c.a.createElement("div",{className:"col-auto account-button"},this.accountButton()),c.a.createElement("span",{className:"text-danger input-error ".concat(this.state.error?"":"hidden")},"Input name (max 20 symbols)"),this.input())}}]),t}(c.a.Component),ae=Object(s.b)(function(e){return{login:e.login,activeInput:e.activeInput}})(te),ne=(a(243),function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"onClickHandler",value:function(e){"Guest"===this.props.login&&e.preventDefault()}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"row justify-content-center align-items-center mainPage",onClick:function(){return ee.dispatch({type:"activeInput",value:!1})},role:"button",onKeyPress:void 0,tabIndex:"-1"},c.a.createElement(h.b,{to:"/chat",onClick:function(t){return e.onClickHandler(t)}},c.a.createElement("div",{className:"smile-text text-monospace text-uppercase"},c.a.createElement("div",{className:"circle"}),c.a.createElement("div",{className:"circle-blink"},c.a.createElement("div",{className:"shadow"}),c.a.createElement("div",{className:"blinked"})),c.a.createElement("span",{className:"char1"},"J"),c.a.createElement("span",{className:"char2"},"o"),c.a.createElement("span",{className:"char3"},"i"),c.a.createElement("span",{className:"char4"},"n"),c.a.createElement("span",{className:"char5"}),c.a.createElement("span",{className:"char6"},"o"),c.a.createElement("span",{className:"char7"},"u"),c.a.createElement("span",{className:"char8"},"r"),c.a.createElement("span",{className:"char9"}),c.a.createElement("span",{className:"char10"},"a"),c.a.createElement("span",{className:"char11"},"w"),c.a.createElement("span",{className:"char12"},"e"),c.a.createElement("span",{className:"char13"},"s"),c.a.createElement("span",{className:"char14"},"o"),c.a.createElement("span",{className:"char15"},"m"),c.a.createElement("span",{className:"char16"},"e"),c.a.createElement("span",{className:"char17"}),c.a.createElement("span",{className:"char18"},"c"),c.a.createElement("span",{className:"char19"},"h"),c.a.createElement("span",{className:"char20"},"a"),c.a.createElement("span",{className:"char21"},"t"))))}}]),t}(c.a.Component)),ce=Object(s.b)(function(e){return{login:e.login}})(ne);a(244);var ie=function(){return c.a.createElement("div",{className:"row align-items-center footer"},c.a.createElement("span",{className:"rights text-wrap"},"\xa9 2019 Aleksandra Skirnevskaia, Email for contacts",c.a.createElement("a",{className:"footer-mail font-weight-bold",href:"mailto:a.skirnevskaia@gmail.com"},"a.skirnevskaia@gmail.com")))};a(155);function oe(e){var t=new Date(e),a=t.getDate();a<10&&(a="0".concat(a));var n=t.getMonth()+1;n<10&&(n="0".concat(n));var c=t.getHours();c<10&&(c="0".concat(c));var i=t.getMinutes();return i<10&&(i="0".concat(i)),"".concat(c,":").concat(i," ").concat(a,"/").concat(n,"/").concat(t.getFullYear())}function se(e){return"/smiles/".concat(e,".png")}function re(e){for(var t=e,a=[];t.match(/:\w+:/gm);){var n=t.match(/:\w+:/gm)[0],c=t.split(n),i=n.split(":")[1];if(a.push(c[0]),a.push([i]),!c[1].match(/:\w+:/gm))return a.push(c[1]),a;t=c[1]}return a}function le(e){for(var t=e;-1!==t.indexOf('.png?alt=media">');){var a=t.replace('<img width="32" height="32" src="https://firebasestorage.googleapis.com/v0/b/awesome-chat-emoji.appspot.com/o/',":").replace('.png?alt=media">',":");t=a}for(;-1!==t.indexOf("&nbsp;");){var n=t.replace("&nbsp;"," ");t=n}for(;-1!==t.indexOf("<br>");){var c=t.replace("<br>","").replace("</br>","");t=c}for(;-1!==t.indexOf("<span");){var i=t.replace('<span style="font-size: 1rem;">',"").replace("</span>","");t=i}for(;-1!==t.indexOf("/smiles/");){var o=t.replace('<img width="32" height="32" src="/smiles/',":").replace('.png">',":");t=o}return t}function me(e){var t=new Image(32,32);t.src=se(e.unicode);'<img width="32" height="32" src='.concat(se(e.unicode),">");f()("#inputChat").focus(),function(e){var t,a;if(window.getSelection){if((t=window.getSelection()).getRangeAt&&t.rangeCount){(a=t.getRangeAt(0)).deleteContents(),document.createElement("div").innerHTML=e;var n,c=document.createDocumentFragment();n=c.appendChild(e),a.insertNode(c),n&&((a=a.cloneRange()).setStartAfter(e),a.collapse(!0),t.removeAllRanges(),t.addRange(a))}}else document.selection&&"Control"!==document.selection.type&&document.selection.createRange().pasteHTML(e)}(t)}a(245),a(156);var ue=function(e){var t=e.login,a=e.messagePack;return a.from===t?c.a.createElement(E.a,{theme:k},c.a.createElement("div",{className:"row chat-page-item justify-content-end"},c.a.createElement("div",{className:"my-message"},c.a.createElement("div",{className:"col-auto my-message-wrapper"},c.a.createElement("div",{className:"col-auto chat-item-from"},a.from),c.a.createElement("div",{className:"col-auto chat-item-message"},a.message),c.a.createElement("div",{className:"col-auto chat-item-date"},oe(a.time)))))):c.a.createElement(E.a,{theme:k},c.a.createElement("div",{className:"row chat-page-item justify-content-start"},c.a.createElement("div",{className:"their-message"},c.a.createElement("div",{className:"col-auto their-message-wrapper"},c.a.createElement("div",{className:"col-auto chat-item-from"},a.from),c.a.createElement("div",{className:"w-100"}),c.a.createElement("div",{className:"col-auto chat-item-message"},a.message),c.a.createElement("div",{className:"w-100"}),c.a.createElement("div",{className:"col-auto chat-item-date"},oe(a.time))))))};var de=function(e){var t=e.login,a=e.messagePack;return a.from===t?c.a.createElement(E.a,{theme:k},c.a.createElement("div",{className:"row chat-page-item justify-content-end"},c.a.createElement("div",{className:"my-message"},c.a.createElement("div",{className:"col-auto my-message-wrapper"},c.a.createElement("div",{className:"col-auto chat-item-from"},a.from),c.a.createElement("div",{className:"col-auto chat-item-message"},re(a.message).map(function(e,t){return"string"===typeof e?c.a.createElement("span",{key:t},e):c.a.createElement("img",{key:t,width:"32",height:"32",src:se(e[0]),alt:e[0]})})),c.a.createElement("div",{className:"col-auto chat-item-date"},oe(a.time)))))):c.a.createElement(E.a,{theme:k},c.a.createElement("div",{className:"row chat-page-item justify-content-start"},c.a.createElement("div",{className:"their-message"},c.a.createElement("div",{className:"col-auto their-message-wrapper"},c.a.createElement("div",{className:"col-auto chat-item-from"},a.from),c.a.createElement("div",{className:"col-auto chat-item-message"},re(a.message).map(function(e,t){return"string"===typeof e?c.a.createElement("span",{key:t},e):c.a.createElement("img",{key:t,width:"32",height:"32",src:se(e[0]),alt:e[0]})})),c.a.createElement("div",{className:"col-auto chat-item-date"},oe(a.time))))))},he=a(216),pe=a.n(he),ge=(a(467),a(509));function fe(e){var t=Object(A.a)(function(){return{root:{position:"absolute"},iconHover:{color:k.palette[e.theme].main,"&:hover":{color:k.palette[e.theme].light},"&:active":{color:k.palette[e.theme].dark}}}})();return c.a.createElement(E.a,{theme:k},c.a.createElement(ge.a,{variant:"contained",className:t.iconHover,style:{outline:"none"},onClick:e.onClickHandler},e.icon))}var ve=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){e.setState({html:t.target.value})},e.state={emoji:!1,html:""},e.mounted=!1,e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.setState(null),this.mounted=!1}},{key:"showSmilesOnHover",value:function(){this.setState({emoji:!0})}},{key:"hideSmilesOnMouseLeave",value:function(){this.setState({emoji:!1})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"row chat-page-form justify-content-center align-items-center"},c.a.createElement("div",{className:"input-area row justify-content-center align-items-center"},c.a.createElement("div",{className:"media-selector"},c.a.createElement(fe,{onClickHandler:function(){return console.log("not ready yet")},theme:"secondary",icon:c.a.createElement(x.a,null,"attach_file")})),c.a.createElement("span",{id:"inputChat",className:"input-text-area row align-items-center",html:this.state.html,onChange:this.handleChange,contentEditable:"true","aria-multiline":"true",role:"textbox",tabIndex:"-1",onClick:function(e){if(f()(e.target).is("img")){var t=document.createRange();f()(e.target).focus(),t.selectNodeContents(e.target),t.collapse(!0),t.setEndAfter(e.target);var a=window.getSelection();return a.removeAllRanges(),a.addRange(t),f()("#inputChat").focus(),!1}},onKeyPress:function(t){"Enter"!==t.key&&13!==t.which&&13!==t.keyCode||(t.preventDefault(),e.props.submitClickHandler())}}),c.a.createElement("div",{className:"chat-buttons"},c.a.createElement("div",{id:"emoji-block",className:"emoji-block",onMouseEnter:function(){return e.showSmilesOnHover()},onMouseLeave:function(){return e.hideSmilesOnMouseLeave()}},c.a.createElement(fe,{onClickHandler:function(){return e.showSmilesOnHover()},theme:"secondary",icon:c.a.createElement(x.a,null,"emoji_emotions")}),c.a.createElement("div",{className:"".concat(this.state.emoji?"smile-block":"hidden")},c.a.createElement(pe.a,{id:"emoji-box",className:"emoji-picker",nonce:"NONCE_GENERATED_WHEN_TRANSMITTING",onChange:function(t){e.setState({html:me(t)})}}))),c.a.createElement("div",{className:"send-button"},c.a.createElement(fe,{onClickHandler:function(){return e.props.submitClickHandler()},theme:"secondary",icon:c.a.createElement(x.a,null,"send")})))))}}]),t}(n.Component),be=a(217),Ee=a.n(be);var Ne=a(218),ye=a.n(Ne),ke=a(105),we=a.n(ke);window.React=c.a;var Oe=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={title:"",activeWindow:!0},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({ignore:!e.props.switch})},100),f()(window).blur(function(){e.setState({activeWindow:!1})}),f()(window).focus(function(){e.setState({activeWindow:!0})})}},{key:"componentWillReceiveProps",value:function(){var e=this;setTimeout(function(){var t=e.props.newMessage,a=localStorage.getItem("newMes");t===a&&"undefined"!==a||(e.setState({newProp:t}),localStorage.setItem("newMes",t),!1===e.state.ignore&&f()("#notif").click())},200),setTimeout(function(){void 0!==e.props.switch&&e.setState({ignore:!e.props.switch})},200)}},{key:"handlePermissionGranted",value:function(){!0===this.props.switch&&(console.log("Permission Granted"),this.setState({ignore:!1}))}},{key:"handlePermissionDenied",value:function(){!1===this.props.switch&&(console.log("Permission Denied"),this.setState({ignore:!0}))}},{key:"handleNotSupported",value:function(){console.log("Web Notification not Supported"),this.setState({ignore:!0})}},{key:"handleNotificationOnClick",value:function(e,t){}},{key:"handleNotificationOnError",value:function(e,t){}},{key:"handleNotificationOnClose",value:function(e,t){}},{key:"handleNotificationOnShow",value:function(e,t){this.playSound()}},{key:"playSound",value:function(){f()("#sound").trigger("play")}},{key:"handleButtonClick",value:function(){if(!this.state.ignore){var e=Date.now(),t="New message at Awesome Chat ".concat(e),a={tag:e,body:"Message: ".concat(this.state.newProp||"..."),icon:"http://mobilusoss.github.io/react-web-notification/example/Notifications_button_24.png",lang:"en",dir:"ltr",sound:we.a};this.setState({title:t,options:a})}}},{key:"handleButtonClick2",value:function(){this.props.swRegistration.getNotifications({}).then(function(e){console.log(e)})}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("button",{id:"notif",style:{display:"none"},onClick:this.handleButtonClick.bind(this)},"Notif!"),"swExample"===document.title&&c.a.createElement("button",{onClick:this.handleButtonClick2.bind(this)},"swRegistration.getNotifications"),c.a.createElement(ye.a,{ignore:this.state.ignore&&this.state.activeWindow||this.state.activeWindow,notSupported:this.handleNotSupported.bind(this),onPermissionGranted:this.handlePermissionGranted.bind(this),onPermissionDenied:this.handlePermissionDenied.bind(this),onShow:this.handleNotificationOnShow.bind(this),onClick:this.handleNotificationOnClick.bind(this),onClose:this.handleNotificationOnClose.bind(this),onError:this.handleNotificationOnError.bind(this),timeout:2e3,title:this.state.title,options:this.state.options,swRegistration:this.props.swRegistration}),c.a.createElement("audio",{id:"sound",preload:"auto"},c.a.createElement("source",{src:we.a,type:"audio/mpeg"}),c.a.createElement("embed",{hidden:!0,autostart:"false",loop:!1,src:we.a})))}}]),t}(c.a.Component),Ce=Object(s.b)(function(e){return{newMessage:e.newMessage,switch:e.switch}})(Oe),je=a(510),Se=a(513),Ae=Object(S.a)({switchBase:{color:k.palette.golden.dark,"&$checked":{color:k.palette.primary.main},"&$checked + $track":{backgroundColor:k.palette.primary.dark}},checked:{},track:{}})(Se.a);function Ie(e){var t,a=c.a.useState({checked:e.ignore}),n=Object(j.a)(a,2),i=n[0],o=n[1];return c.a.createElement(je.a,{control:c.a.createElement(Ae,{checked:i.checked,onChange:(t="checked",function(e){o(Object(C.a)({},i,Object(O.a)({},t,e.target.checked))),ee.dispatch({type:"switch",value:e.target.checked})}),value:"checked"}),label:"Notifications"})}var xe=a(219),He=a.n(xe);function Me(e){return c.a.createElement("div",{className:"status-block"},1===e.status?c.a.createElement(fe,{onClickHandler:function(){},theme:"success",icon:c.a.createElement(x.a,null,"checkIcon")}):c.a.createElement(c.a.Fragment,null,c.a.createElement("span",null,"reconnecting"),c.a.createElement(fe,{onClickHandler:function(){},theme:"fail",icon:c.a.createElement(He.a,null)})))}var Be=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={messages:[]},e.messages=[],e.mounted=!1,e.name=ee.getState().login,e.ws=function(){var e=new Ee.a("ws://st-chat.shas.tel");return e.on("open",function(){setTimeout(function(){console.log("open",e.ws.readyState),ee.dispatch({type:"status",value:e.ws.readyState})},300)}),e.on("close",function(){console.log("connection closed",e.ws.readyState,"reconnecting"),ee.dispatch({type:"status",value:e.ws.readyState}),e.reconnect()}),e.on("message",function(e){var t=JSON.parse(e.data).splice(0,100).reverse();if(1===t.length){var a="".concat(t[0].from,": ").concat(t[0].message);ee.dispatch({type:"newMessage",value:a})}ee.dispatch({type:"messages",value:t});var n=document.getElementById("messages-area");setTimeout(function(){n.scrollTo({top:n.scrollHeight-n.clientHeight,behavior:"smooth"})},50)}),e}(),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.mounted=!0}},{key:"componentDidMount",value:function(){this.mounted=!0;var e=document.getElementById("messages-area");setTimeout(function(){e.scrollTo({top:e.scrollHeight-e.clientHeight,behavior:"instant"})},1500)}},{key:"componentWillUnmount",value:function(){this.setState(null),this.mounted=!1,this.messages=[]}},{key:"submitClickHandler",value:function(){var e={from:this.name,message:le(f()("#inputChat").html())};this.ws.emit(JSON.stringify(e)),f()("#inputChat").text("")}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"row chat-page justify-content-center align-items-center",onClick:function(){return ee.dispatch({type:"activeInput",value:!1})},role:"button",onKeyPress:void 0,tabIndex:"-1"},c.a.createElement("div",{className:"switcher"},c.a.createElement(Ie,{ignore:this.props.switch}),c.a.createElement(Me,{status:this.props.status})),c.a.createElement("div",{className:"row chat-page-messages"},c.a.createElement("div",{id:"messages-area",className:"messages-wrapper"},this.props.messages.map(function(t){if(t&&t.message)return t.message.match(/:\w+:/gm)?c.a.createElement(de,{key:t.id,login:e.name,messagePack:t}):c.a.createElement(ue,{key:t.id,login:e.name,messagePack:t})}))),c.a.createElement(ve,{submitClickHandler:function(){1===e.props.status&&e.submitClickHandler()}}),c.a.createElement(Ce,null))}}]),t}(n.Component),Ke=Object(s.b)(function(e){return{status:e.status,messages:e.messages,switch:e.switch}})(Be),Te=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement(h.a,null,c.a.createElement("div",{className:"container-fluid"},c.a.createElement(ae,null),c.a.createElement(p.a,{path:"/",exact:!0,component:ce}),c.a.createElement(p.a,{path:"/chat",component:Ke}),c.a.createElement(ie,null)))}}]),t}(n.Component);o.a.render(c.a.createElement(s.a,{store:ee},c.a.createElement(Te,null)),document.getElementById("root"))}},[[229,1,2]]]);
//# sourceMappingURL=main.b65b3275.chunk.js.map
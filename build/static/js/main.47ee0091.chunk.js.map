{"version":3,"sources":["assets/sound.mp3","components/functions/index.js","assets/chat.png","components/Notifications/notif.js","components/Notifications/serviceWorker.js","theme/theme.js","components/buttons/loginButton.js","components/buttons/loginInput.js","components/account/account.js","components/header/header.js","containers/mainPage/mainPage.js","components/footer/index.js","components/chatItems/textChatItem.js","components/chatItems/smileChatItem.js","components/buttons/iconButtons.js","components/ChatInput/ChatInput.js","components/functions/mySocket.js","components/buttons/switcher.js","components/wsStatus/wsStatus.js","containers/chatPage/chatPage.js","app.js","index.js","store/store.js"],"names":["module","exports","__webpack_require__","p","d","__webpack_exports__","getDate","makeSRC","findSmile","replaceSmileWithUnicode","makeEmojiFromUnicode","jquery__WEBPACK_IMPORTED_MODULE_0__","jquery__WEBPACK_IMPORTED_MODULE_0___default","n","time","data","Date","day","concat","month","getMonth","hour","getHours","minutes","getMinutes","getFullYear","code","text","before","after","match","str","message","split","unicode","push","replaced","indexOf","replace","event","img","Image","src","$","focus","html","sel","range","window","getSelection","getRangeAt","rangeCount","deleteContents","document","createElement","innerHTML","lastNode","frag","createDocumentFragment","appendChild","insertNode","cloneRange","setStartAfter","collapse","removeAllRanges","addRange","selection","type","createRange","pasteHTML","pasteHtmlAtCaret","Notifications","props","_this","Object","D_repos_chat_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_super","call","state","ignore","_this2","notifyMe","setTimeout","setState","switch","blur","activeWindow","_this3","prop","newMessage","oldMes","localStorage","getItem","newProp","setItem","notificationSend","undefined","Notification","permission","smile","total","map","item","i","_this4","mes","showSmile","now","title","options","tag","body","icon","lang","dir","sound","image","visibilityState","test","navigator","userAgent","requestPermission","result","serviceWorker","ready","then","registration","showNotification","catch","err","global","console","log","notification","onclick","preventDefault","close","store","dispatch","value","playSound","alert","trigger","react__WEBPACK_IMPORTED_MODULE_4___default","a","id","preload","hidden","autostart","loop","Component","connect","register","isLocalhost","Boolean","location","hostname","config","URL","process","href","origin","addEventListener","swUrl","fetch","response","contentType","headers","get","status","unregister","reload","registerValidSW","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","error","theme","createMuiTheme","palette","primary","light","main","dark","contrastText","secondary","golden","success","fail","LoginButton","react_default","ThemeProvider","Button","variant","color","style","outline","onClick","showInputOnClick","CssTextField","withStyles","root","& label.Mui-focused","& .MuiInput-underline:after","borderBottomColor","& .MuiOutlinedInput-root","& fieldset","borderColor","&:hover fieldset","&.Mui-focused fieldset","TextField","useStyles","makeStyles","position","iconHover","cursor","top","right","&:hover","&:active","LoginInput","name","classes","_React$useState","React","useState","_React$useState2","slicedToArray","values","setValues","label","onChange","objectSpread2","defineProperty","target","onKeyPress","e","which","keyCode","key","getInputLogin","margin","backgroundColor","Icon","className","StyledMenu","paper","border","Menu","assign","elevation","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","StyledMenuItem","&:focus","& .MuiListItemIcon-root, & .MuiListItemText-primary","MenuItem","Account","anchorEl","setAnchorEl","aria-controls","aria-haspopup","currentTarget","ArrowDropDown_default","marginRight","keepMounted","open","onClose","editNameHandler","ListItemIcon","Edit_default","ListItemText","Chat_default","react_router_dom","to","logOutHandler","PowerOff_default","Header","classCallCheck","active","isLoggedIn","login","val","length","react_router","hasClass","activeInput","inputOnChange","logOutOnClick","showInput","chat","alt","accountButton","input","MainPage","inputActive","role","tabIndex","onClickHandler","Footer","TextChatItem","messagePack","from","SmileChatItem","m","width","height","MyIconButton","IconButton","ChatInput","handleChange","evt","emoji","attachment","mounted","toggleAttachBlock","contentEditable","aria-multiline","is","selectNodeContents","setEndAfter","submitClickHandler","onMouseEnter","showSmilesOnHover","onMouseLeave","hideSmilesOnMouseLeave","lib_picker_default","nonce","messages","CustomSwitch","switchBase","&$checked","&$checked + $track","checked","track","Switch","Switcher","FormControlLabel","control","Status","Fragment","SignalCellularConnectedNoInternet0Bar_default","Chat","ws","BrowserWebSocket","on","readyState","reconnect","JSON","parse","splice","reverse","newMes","div","getElementById","scrollTo","scrollHeight","clientHeight","behavior","connectSocket","mess","emit","stringify","smileChatItem","textChatItem","components_ChatInput_ChatInput","App","header_header","exact","path","redirect","component","components_footer","notif","vh","innerHeight","documentElement","setProperty","ReactDOM","render","es","app","switchOption","redux__WEBPACK_IMPORTED_MODULE_0__","initialState","mesAll","createStore","arguments","action"],"mappings":"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","file":"static/js/main.47ee0091.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/sound.13620510.mp3\";","/* eslint-disable no-cond-assign */\r\n/* eslint-disable no-bitwise */\r\nimport $ from 'jquery';\r\n\r\nexport function makeRandomId() {\r\n  const j = [];\r\n  let x;\r\n  for (let i = 0; i < 20; i += 1) {\r\n    x = [[48, 57], [65, 90], [97, 122]][(Math.random() * 3) >> 0];\r\n    j[i] = String.fromCharCode(((Math.random() * (x[1] - x[0] + 1)) >> 0) + x[0]);\r\n  }\r\n  return j.join('');\r\n}\r\n\r\nexport function getDate(time) {\r\n  const data = new Date(time);\r\n  let day = data.getDate();\r\n  if (day < 10) {\r\n    day = `0${day}`;\r\n  }\r\n  let month = data.getMonth() + 1;\r\n  if (month < 10) {\r\n    month = `0${month}`;\r\n  }\r\n  let hour = data.getHours();\r\n  if (hour < 10) {\r\n    hour = `0${hour}`;\r\n  }\r\n  let minutes = data.getMinutes();\r\n  if (minutes < 10) {\r\n    minutes = `0${minutes}`;\r\n  }\r\n  return `${hour}:${minutes} ${day}/${month}/${data.getFullYear()}`;\r\n}\r\n\r\nexport function makeSRC(code) {\r\n  return `./smiles/${code}.png`;\r\n}\r\n\r\nexport function findSmile(text) {\r\n  let before = text;\r\n  const after = [];\r\n  while (before.match(/:\\w+:/gm)) {\r\n    const str = before.match(/:\\w+:/gm)[0];\r\n    const message = before.split(str);\r\n    const unicode = str.split(':')[1];\r\n    after.push(message[0]);\r\n    after.push([unicode]);\r\n    if (!message[1].match(/:\\w+:/gm)) {\r\n      after.push(message[1]);\r\n      return after;\r\n    }\r\n    before = message[1];\r\n  }\r\n  return after;\r\n}\r\n\r\nexport function replaceSmileWithUnicode(text) {\r\n  let replaced = text;\r\n  while (replaced.indexOf('&nbsp;') !== -1) {\r\n    const str = replaced.replace('&nbsp;', ' ');\r\n    replaced = str;\r\n  }\r\n  while (replaced.indexOf('<br>') !== -1) {\r\n    const str = replaced.replace('<br>', '').replace('</br>', '');\r\n    replaced = str;\r\n  }\r\n  while (replaced.indexOf('<span') !== -1) {\r\n    const str = replaced\r\n      .replace('<span style=\"font-size: 1rem;\">', '').replace('</span>', '');\r\n    replaced = str;\r\n  }\r\n  while (replaced.indexOf('./smiles/') !== -1) {\r\n    const str = replaced\r\n      .replace('<img', '')\r\n      .replace('height=\"32\"', '')\r\n      .replace('width=\"32\"', '')\r\n      .replace('src=\"./smiles/', ':')\r\n      .replace('.png\"', ':')\r\n      .replace('>', '');\r\n    replaced = str;\r\n  }\r\n\r\n  return replaced;\r\n}\r\n\r\nfunction pasteHtmlAtCaret(html) {\r\n  let sel;\r\n  let range;\r\n  if (window.getSelection) {\r\n    sel = window.getSelection();\r\n    if (sel.getRangeAt && sel.rangeCount) {\r\n      range = sel.getRangeAt(0);\r\n      range.deleteContents();\r\n      const el = document.createElement('div');\r\n      el.innerHTML = html;\r\n      const frag = document.createDocumentFragment();\r\n      let lastNode;\r\n      lastNode = frag.appendChild(html);\r\n      range.insertNode(frag);\r\n      if (lastNode) {\r\n        range = range.cloneRange();\r\n        range.setStartAfter(html);\r\n        range.collapse(true);\r\n        sel.removeAllRanges();\r\n        sel.addRange(range);\r\n      }\r\n    }\r\n  } else if (document.selection && document.selection.type !== 'Control') {\r\n    document.selection.createRange().pasteHTML(html);\r\n  }\r\n}\r\n\r\nexport function makeEmojiFromUnicode(event) {\r\n  const img = new Image(32, 32);\r\n  img.src = makeSRC(event.unicode);\r\n  $('#inputChat').focus();\r\n  pasteHtmlAtCaret(img);\r\n}\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAABrVBMVEVHcEyZZpmNbaD/AP+NbJ+NbZ+Kbp+NbJ+NbZ+AgKqObJ+NbJ6NbJ+NbJ+NbJ+LbaCQcKGQcqSQcaOZZpmAgICYg6+NbJ+MbJ+Oa6CRcKGObqCNbaCOb6GOaKGPcKOJbZuObKCNbJ+Kap+MbaCNbJ+NbKCNbZ+MbZ+NbJ+NbZ+VapWqVaqObJ+ObZ+OcZyMbKCNbKCMbKCZeKGNbKCNbJ+NbJ/CzefO2e2st9D5467qzZjI0+rEz+iUfqvN2O3k6vSag7DV3u/M1+2chrKZgrDi6POchLHa4/Hfx6rS2+7j6fTDzufv1aCZg7D44azDzujU3O3e5PKXdp7P2u2bhbGzvtelpcSUfKqorsr54q7exqrq06yig6Hsz5rU3O7a4vHS3e/T3O3X4PDV3e7X3/DrzpmahLDny5jrzpq5mZzR3O62t9a4mpyst8++yuSuudGtuNHAy+WtudGuuNG9vdqjosKhnb+PcaKlp8Wqss2QdKSnq8mSeaiWhK6Xg66psMuTfamsttCPcKKqtM2pi6Ogm76niKO1maWVdKDmz6uObp/hyaqjhKL03a3ZwKq6p+DbAAAANXRSTlMABW4BwLwl5YgGh4nm6dRLqFz1CgK9wc8rff3J/Rv+HOTiGFvu2496+soMAy3+ErvTdvzz8XV3z8kAAAJrSURBVFjD7ZdVe9swFEBTtDNmZma+kWGZnSVNU9hKK60dMzNTx7zfPFlzHNvylSVvD3vofZBBOueTLFnfVS43Hf9F5GfOAqXQ9HxEoINy6BGBBjcK4rAJIXb9hpCHoEUEAGr8kcMASgKOLygIek4n8AqCnnNOF88rCC44Tvd5jrcVhtDVfZbnibzAJhcTeHlBwvdjt7ICjJcVoLykAOdxQYX/bdyCXfWu5RCPC1xecMwmZe96OcTLDEHQfymBmE8XpPAktjNxgjSexHYm4Sz8mYkoTwWWZZlmzd+ZhLPAZsLjzzR42xeY/reIDiHW/6N+/0tOKeALIgHGdzgdpTovEiB8p+NFp8+jgv4+hA/1gNUign5nYAjhg2/AajFB38B1lKejaPCYwB4S8CTEIwJ0/ByfKKicoC1c11tNZXpX9f5/9q5arhestuIiAgC2wtimzxar/44Ehe2/SxLcG74PYBiGVHF3+DYneGAYxaIhXdzhBIZixAQajKjxIzAYEYRSnNFbrMXbYkqKcy0iyOtaUDPGBB/F+ODNK5Z1qSFoxAJ44fFj72BjsF9aSPQmCBatgGeUfz8KbS1pglPHEwTL4Anl30zB+g05seBqr8dzgmZ4ZRiPnsO69tCWbwoiLlgKj5++Bli5NpdNMBfgJcCq5U2RJLSG87VYwjmHztCaxauFafCHcQqOf6o/zog0bp09b/7CeCIeWiMsTlLBBJJ0S8QW+EwF32F71pNB+7bdtAtfYV/ms4UOBybMn98OtmQVNLXCl1/mJOzK3IUdewF+TMLW7AeknfsP0QnY/DdnrD3NbZuWTB81/2X8BlOCJK5wgIZZAAAAAElFTkSuQmCC\"","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport * as serviceWorker from 'components/Notifications/serviceWorker';\r\nimport sound from 'assets/sound.mp3';\r\nimport $ from 'jquery';\r\nimport store from 'store/store';\r\nimport { findSmile } from 'components/functions/index';\r\n\r\nclass Notifications extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      ignore: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.notifyMe();\r\n    setTimeout(() => {\r\n      this.setState({ ignore: this.props.switch ? false : true });\r\n    }, 100);\r\n    $(window).blur(() => {\r\n      this.setState({ activeWindow: false });\r\n    })\r\n    $(window).focus(() => {\r\n      this.setState({ activeWindow: true });\r\n    })\r\n  }\r\n\r\n  componentWillReceiveProps() {\r\n    setTimeout(() => {\r\n      const prop = this.props.newMessage;\r\n      const oldMes = localStorage.getItem('newMes');\r\n      if (prop !== oldMes || oldMes === 'undefined') {\r\n        this.setState({ newProp: prop })\r\n        localStorage.setItem('newMes', prop)\r\n        if (this.state.ignore === false) {\r\n          this.notificationSend(prop)\r\n        }\r\n      }\r\n    }, 200);\r\n    setTimeout(() => {\r\n      if (this.props.switch !== undefined) {\r\n        this.setState({ ignore: this.props.switch ? false : true });\r\n        if (this.props.switch === true) {\r\n          if (Notification.permission === 'denied' || Notification.permission === 'default') {\r\n            this.notifyMe()\r\n          }\r\n        }\r\n      }\r\n    }, 200);\r\n  }\r\n\r\n  showSmile(text) {\r\n    if (text.match(/:\\w+:/gm)) {\r\n      let message = '';\r\n      let smile = '';\r\n      let total = [];\r\n      const smileText = findSmile(text);\r\n      smileText.map((item, i) => {\r\n        if (typeof item === 'object') {\r\n          smile = `./smiles/${item[0]}.png`;\r\n        } else {\r\n          message += item;\r\n        }\r\n      })\r\n      total.push(smile);\r\n      total.push(message);\r\n      return total;\r\n    } else {\r\n      return text;\r\n    }\r\n  }\r\n\r\n  notificationSend(message) {\r\n    const mes = this.showSmile(message) || '...';\r\n    const now = Date.now();\r\n    const title = `New message at Awesome Chat ${now}`;\r\n    const body = `Message: ${typeof mes === 'object' ? mes[1] : mes}`;\r\n    const tag = now;\r\n    const icon = 'http://mobilusoss.github.io/react-web-notification/example/Notifications_button_24.png';\r\n    const options = {\r\n      tag: tag,\r\n      body: body,\r\n      icon: icon,\r\n      lang: 'en',\r\n      dir: 'ltr',\r\n      sound: sound,\r\n      image: typeof mes === 'object' ? mes[0] : ''\r\n    }\r\n    this.setState({\r\n      title: title,\r\n      options: options\r\n    });\r\n    if ('Notification' in window && document.visibilityState !== 'visible') {\r\n      if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n        Notification.requestPermission((result) => {\r\n          if (result === 'granted') {\r\n            navigator.serviceWorker.ready.then((registration) => {\r\n              registration.showNotification(this.state.title, options);\r\n            }).catch((err) => global.console.log(err));\r\n          }\r\n        });\r\n      } else {\r\n        this.notification = new Notification(this.state.title, options);\r\n        this.notification.onclick = (event) => {\r\n          event.preventDefault();\r\n          window.focus();\r\n          this.notification.close();\r\n          store.dispatch({ type: 'redirect', value: true });\r\n        };\r\n        setTimeout(() => {\r\n          this.notification.close();\r\n        }, 2000);\r\n      }\r\n      setTimeout(() => {\r\n        this.playSound();\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  notifyMe() {\r\n    serviceWorker.register();\r\n    if (!('Notification' in window)) {\r\n      global.alert('This browser does not support desktop notification');\r\n    } else if (Notification.permission === 'granted' || Notification.permission === 'default') {\r\n      Notification.requestPermission((permission) => {\r\n        if (permission === 'granted') {\r\n          navigator.serviceWorker.ready.then((registration) => {\r\n            registration.showNotification('notification permissions have been granted');\r\n          }).catch((err) => global.console.log(err));\r\n        }\r\n      });\r\n    } else if (Notification.permission === 'denied' && this.props.switch === true) {\r\n      global.alert(`You blocked notification request :( \r\n    If you want to receive notifications you should unblock it in the browser settings`)\r\n      store.dispatch({ type: 'switch', value: false });\r\n    }\r\n  }\r\n\r\n  playSound() {\r\n    if (Notification.permission === 'granted') {\r\n      $('#sound').trigger('play');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <audio id='sound' preload='auto'>\r\n        <source src={sound} type='audio/mpeg' />\r\n        <embed hidden={true} autostart='false' loop={false} src={sound} />\r\n      </audio>\r\n    );\r\n  }\r\n}\r\n\r\nNotifications.propTypes = {\r\n  newMessage: PropTypes.string.isRequired,\r\n  switch: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]).isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({ newMessage: state.newMessage, switch: state.switch });\r\nexport default connect(mapStateToProps)(Notifications);","const isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost'\r\n  // [::1] is the IPv6 localhost address.\r\n  || window.location.hostname === '[::1]'\r\n  // 127.0.0.1/8 is considered localhost for IPv4.\r\n  || window.location.hostname.match(\r\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\r\n  ),\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service '\r\n            + 'worker. To learn more, visit http://bit.ly/CRA-PWA',\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all '\r\n                + 'tabs for this page are closed. See http://bit.ly/CRA-PWA.',\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404\r\n        || (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.',\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then((registration) => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}","import { createMuiTheme } from '@material-ui/core/styles';\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      light: '#e7f2ff', // light\r\n      main: '#b4bff1',\r\n      dark: '#838fbe',\r\n      contrastText: '#292733'\r\n    },\r\n    secondary: {\r\n      light: '#524f5c', // dark\r\n      main: '#454153',\r\n      dark: '#292733',\r\n      contrastText: '#fce8c5'\r\n    },\r\n    golden: {\r\n      light: '#ffffc5',\r\n      main: '#fad694',\r\n      dark: '#c6a565',\r\n      contrastText: '#292733'\r\n    },\r\n    success: {\r\n      light: '#e6ffe6',\r\n      main: '#2ac92a',\r\n      dark: '#288028',\r\n    },\r\n    fail: {\r\n      light: '#fff7f5',\r\n      main: '#f54922',\r\n      dark: '#b53c21'\r\n    }\r\n  }\r\n});\r\n\r\nexport default theme;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport theme from 'theme/theme';\r\n\r\nexport default function LoginButton(props) {\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"secondary\"\r\n        style={{ outline: 'none' }}\r\n        onClick={props.showInputOnClick}\r\n      >\r\n        Log In\r\n      </Button>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nLoginButton.propTypes = {\r\n  showInputOnClick: PropTypes.func.isRequired\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Icon from '@material-ui/core/Icon';\r\nimport theme from 'theme/theme';\r\n\r\nconst CssTextField = withStyles({\r\n  root: {\r\n    '& label.Mui-focused': {\r\n      color: theme.palette.primary.contrastText\r\n    },\r\n    '& .MuiInput-underline:after': {\r\n      borderBottomColor: theme.palette.secondary.dark\r\n    },\r\n    '& .MuiOutlinedInput-root': {\r\n      '& fieldset': {\r\n        borderColor: theme.palette.primary.dark,\r\n        color: theme.palette.primary.contrastText\r\n      },\r\n      '&:hover fieldset': {\r\n        borderColor: theme.palette.secondary.dark\r\n      },\r\n      '&.Mui-focused fieldset': {\r\n        borderColor: theme.palette.secondary.dark\r\n      }\r\n    }\r\n  }\r\n})(TextField);\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    position: 'absolute'\r\n  },\r\n  iconHover: {\r\n    cursor: 'pointer',\r\n    position: 'absolute',\r\n    top: '31px',\r\n    right: '5px',\r\n    color: theme.palette.primary.dark,\r\n    '&:hover': {\r\n      color: theme.palette.secondary.light\r\n    },\r\n    '&:active': {\r\n      color: theme.palette.secondary.dark\r\n    }\r\n  }\r\n}));\r\n\r\nexport default function LoginInput(props) {\r\n  const classes = useStyles();\r\n\r\n  const [values, setValues] = React.useState({\r\n    name: ''\r\n  });\r\n\r\n  const handleChange = name => event => {\r\n    setValues({ ...values, [name]: event.target.value });\r\n  };\r\n\r\n  return (\r\n    <form>\r\n      <CssTextField\r\n        id=\"inputLogin\"\r\n        label=\"Name\"\r\n        value={values.name}\r\n        onChange={handleChange('name')}\r\n        onKeyPress={e => {\r\n          if (e.which === 13 || e.keyCode === 13 || e.key === 'enter') {\r\n            props.getInputLogin();\r\n          }\r\n        }}\r\n        margin=\"normal\"\r\n        variant=\"outlined\"\r\n        style={{\r\n          backgroundColor: theme.palette.primary.light\r\n        }}\r\n      />\r\n      <Icon className={classes.iconHover} onClick={props.getInputLogin}>\r\n        send\r\n      </Icon>\r\n    </form>\r\n  );\r\n}\r\n\r\nLoginInput.propTypes = {\r\n  getInputLogin: PropTypes.func.isRequired\r\n};\r\n","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport LogOut from '@material-ui/icons/PowerOff';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\nimport theme from 'theme/theme';\r\nimport 'components/account/account.scss';\r\nimport store from 'store/store';\r\n\r\nconst StyledMenu = withStyles({\r\n  paper: {\r\n    border: `1px solid ${theme.palette.secondary.light}`,\r\n    backgroundColor: theme.palette.primary.light,\r\n    color: theme.palette.primary.contrastText\r\n  }\r\n})(props => (\r\n  <Menu\r\n    elevation={0}\r\n    getContentAnchorEl={null}\r\n    anchorOrigin={{\r\n      vertical: 'bottom',\r\n      horizontal: 'center'\r\n    }}\r\n    transformOrigin={{\r\n      vertical: 'top',\r\n      horizontal: 'center'\r\n    }}\r\n    {...props}\r\n  />\r\n));\r\n\r\nconst StyledMenuItem = withStyles(() => ({\r\n  root: {\r\n    '&:focus': {\r\n      '& .MuiListItemIcon-root, & .MuiListItemText-primary': {\r\n        color: theme.palette.primary.contrastText\r\n      }\r\n    }\r\n  }\r\n}))(MenuItem);\r\n\r\nexport default function Account(props) {\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n  function handleClick(event) {\r\n    setAnchorEl(event.currentTarget);\r\n  }\r\n\r\n  function handleClose() {\r\n    setAnchorEl(null);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <ThemeProvider theme={theme}>\r\n        <Button\r\n          aria-controls=\"customized-menu\"\r\n          aria-haspopup=\"true\"\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={handleClick}\r\n          style={{ outline: 'none' }}\r\n        >\r\n          {props.name}\r\n          <ArrowDropDownIcon style={{ marginRight: '-10px' }} />\r\n        </Button>\r\n        <StyledMenu\r\n          id=\"customized-menu\"\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleClose}\r\n        >\r\n          <StyledMenuItem\r\n            onClick={() => {\r\n              setAnchorEl(null);\r\n              props.editNameHandler();\r\n            }}\r\n          // onBlur={() => store.dispatch({ type: 'activeInput', value: false })}\r\n          >\r\n            <ListItemIcon>\r\n              <EditIcon />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"Change Name\" />\r\n          </StyledMenuItem>\r\n          <StyledMenuItem\r\n            onClick={() => {\r\n              setAnchorEl(null);\r\n              store.dispatch({ type: 'redirect', value: true })\r\n            }}\r\n          >\r\n            <ListItemIcon>\r\n              <ChatIcon />\r\n            </ListItemIcon>\r\n            <Link to=\"/chat\" className=\"menu-links\">\r\n              <ListItemText primary=\"Join Chat\" />\r\n            </Link>\r\n          </StyledMenuItem>\r\n          <StyledMenuItem\r\n            onClick={() => {\r\n              setAnchorEl(null);\r\n              props.logOutHandler();\r\n            }}\r\n          >\r\n            <ListItemIcon>\r\n              <LogOut />\r\n            </ListItemIcon>\r\n            <Link to=\"/\" className=\"menu-links\">\r\n              <ListItemText primary=\"Log Out\" />\r\n            </Link>\r\n          </StyledMenuItem>\r\n        </StyledMenu>\r\n      </ThemeProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nAccount.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  editNameHandler: PropTypes.func.isRequired,\r\n  logOutHandler: PropTypes.func.isRequired\r\n};\r\n","/* eslint-disable consistent-return */\r\nimport React from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport './header.scss';\r\nimport chat from 'assets/chat.png';\r\nimport LoginButton from 'components/buttons/loginButton';\r\nimport LoginInput from 'components/buttons/loginInput';\r\nimport Account from 'components/account/account';\r\nimport store from 'store/store';\r\n\r\nclass Header extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      name: '',\r\n      active: false,\r\n      isLoggedIn: false,\r\n      error: false\r\n    };\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.setState({ name: this.props.login, isLoggedIn: this.props.login !== 'Guest' ? true : false });\r\n  }\r\n\r\n  showInput() {\r\n    if (this.state.active) {\r\n      this.setState({ active: false });\r\n      store.dispatch({ type: 'activeInput', value: false });\r\n    } else {\r\n      this.setState({ active: true });\r\n      store.dispatch({ type: 'activeInput', value: true });\r\n    }\r\n  }\r\n\r\n  inputOnChange() {\r\n    const name = $('#inputLogin').val();\r\n    if (name && name.length <= 20) {\r\n      store.dispatch({ type: 'login', value: name });\r\n      store.dispatch({ type: 'redirect', value: true });\r\n      store.dispatch({ type: 'activeInput', value: false });\r\n      this.setState({ active: false, isLoggedIn: true, name, error: false });\r\n      return <Redirect to=\"/chat\" />\r\n    } else {\r\n      this.setState({ error: true });\r\n      setTimeout(() => {\r\n        if ($('.input-error') && !$('.input-error').hasClass('hidden')) {\r\n          this.setState({ error: false });\r\n        }\r\n      }, 5000);\r\n    }\r\n  }\r\n\r\n  input() {\r\n    if (this.props.activeInput) {\r\n      return (\r\n        <div id=\"changeNameInput\" className=\"login-input-block\">\r\n          <LoginInput getInputLogin={e => this.inputOnChange(e)} />\r\n        </div>);\r\n    }\r\n  }\r\n\r\n  logOutOnClick() {\r\n    store.dispatch({ type: 'login', value: 'Guest' });\r\n    this.setState({ isLoggedIn: false });\r\n  }\r\n\r\n  accountButton() {\r\n    if (this.state.isLoggedIn) {\r\n      return (\r\n        <Account\r\n          name={this.state.name}\r\n          editNameHandler={() => store.dispatch({ type: 'activeInput', value: true })}\r\n          logOutHandler={() => this.logOutOnClick()}\r\n        />\r\n      );\r\n    }\r\n    return <LoginButton showInputOnClick={() => this.showInput()} />;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"row header justify-content-between align-items-center\">\r\n        <Link\r\n          className=\"col-auto icon-block\"\r\n          to=\"/\"\r\n          onClick={() => {\r\n            store.dispatch({ type: 'redirect', value: false });\r\n          }}\r\n        >\r\n          <img className=\"header-img d-sm-block\" src={chat} alt=\"\" />\r\n          <h5 className=\"icon-name\">Awesome Chat</h5>\r\n        </Link>\r\n        <div className=\"col-auto account-button\">{this.accountButton()}</div>\r\n        <span className={`text-danger input-error ${this.state.error ? '' : 'hidden'}`}>\r\n          Input name (max 20 symbols)\r\n        </span>\r\n        {this.input()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nHeader.propTypes = {\r\n  login: PropTypes.string.isRequired,\r\n  activeInput: PropTypes.bool.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({ login: state.login, activeInput: state.activeInput });\r\nexport default connect(mapStateToProps)(Header);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport 'containers/mainPage/MainPage.scss';\r\nimport store from 'store/store';\r\n\r\nclass MainPage extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      inputActive: false\r\n    };\r\n  }\r\n\r\n  onClickHandler(e) {\r\n    if (this.props.login === 'Guest') {\r\n      if (this.state.inputActive === false) {\r\n        store.dispatch({ type: 'activeInput', value: true });\r\n        this.setState({ inputActive: true })\r\n        e.preventDefault();\r\n      } else {\r\n        store.dispatch({ type: 'activeInput', value: false });\r\n        this.setState({ inputActive: false })\r\n        e.preventDefault();\r\n      }\r\n    } else {\r\n      store.dispatch({ type: 'activeInput', value: false });\r\n      store.dispatch({ type: 'redirect', value: true });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"row justify-content-center align-items-center mainPage\"\r\n        onClick={() => this.state.inputActive ? store.dispatch({ type: 'activeInput', value: false }) : null}\r\n        role=\"button\"\r\n        onKeyPress={undefined}\r\n        tabIndex=\"-1\"\r\n      >\r\n        <Link to=\"/chat\" onClick={e => this.onClickHandler(e)}>\r\n          <div className=\"smile-text text-monospace text-uppercase\">\r\n            <div className=\"circle\" />\r\n            <div className=\"circle-blink\">\r\n              <div className=\"shadow\" />\r\n              <div className=\"blinked\" />\r\n            </div>\r\n            <span className=\"char1\">J</span>\r\n            <span className=\"char2\">o</span>\r\n            <span className=\"char3\">i</span>\r\n            <span className=\"char4\">n</span>\r\n            <span className=\"char5\" />\r\n            <span className=\"char6\">o</span>\r\n            <span className=\"char7\">u</span>\r\n            <span className=\"char8\">r</span>\r\n            <span className=\"char9\" />\r\n            <span className=\"char10\">a</span>\r\n            <span className=\"char11\">w</span>\r\n            <span className=\"char12\">e</span>\r\n            <span className=\"char13\">s</span>\r\n            <span className=\"char14\">o</span>\r\n            <span className=\"char15\">m</span>\r\n            <span className=\"char16\">e</span>\r\n            <span className=\"char17\" />\r\n            <span className=\"char18\">c</span>\r\n            <span className=\"char19\">h</span>\r\n            <span className=\"char20\">a</span>\r\n            <span className=\"char21\">t</span>\r\n          </div>\r\n        </Link>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMainPage.propTypes = {\r\n  login: PropTypes.string.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({ login: state.login });\r\nexport default connect(mapStateToProps)(MainPage);\r\n","import React from 'react';\r\nimport 'components/footer/footer.scss';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <div className=\"row align-items-center footer\">\r\n      <span className=\"rights text-wrap\">\r\n        © 2019 Aleksandra Skirnevskaia, Email for contacts\r\n        <a className=\"footer-mail font-weight-bold\" href=\"mailto:a.skirnevskaia@gmail.com\">\r\n          a.skirnevskaia@gmail.com\r\n        </a>\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport 'components/chatItems/chatItems.scss';\r\nimport { getDate } from 'components/functions';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport theme from 'theme/theme';\r\n\r\nfunction TextChatItem(props) {\r\n  const login = props.login;\r\n  const messagePack = props.messagePack;\r\n  if (messagePack.from === login) {\r\n    return (\r\n      <ThemeProvider theme={theme}>\r\n        <div className=\"row chat-page-item justify-content-end\">\r\n          <div className=\"my-message\">\r\n            <div className=\"col-auto message-wrapper my-message-wrapper\">\r\n              <div className=\"col-auto chat-item-from\">{messagePack.from}</div>\r\n              <div className=\"col-auto chat-item-message\">{messagePack.message}</div>\r\n              <div className=\"col-auto chat-item-date\">{getDate(messagePack.time)}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </ThemeProvider>\r\n    );\r\n  }\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <div className=\"row chat-page-item justify-content-start\">\r\n        <div className=\"their-message\">\r\n          <div className=\"col-auto message-wrapper their-message-wrapper\">\r\n            <div className=\"col-auto chat-item-from\">{messagePack.from}</div>\r\n            <div className=\"w-100\" />\r\n            <div className=\"col-auto chat-item-message\">{messagePack.message}</div>\r\n            <div className=\"w-100\" />\r\n            <div className=\"col-auto chat-item-date\">{getDate(messagePack.time)}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nTextChatItem.propTypes = {\r\n  login: PropTypes.string.isRequired,\r\n  messagePack: PropTypes.instanceOf(Object).isRequired\r\n};\r\n\r\nexport default TextChatItem;\r\n","/* eslint-disable react/no-array-index-key */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport 'components/chatItems/chatItems.scss';\r\nimport { getDate, findSmile, makeSRC } from 'components/functions';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport theme from 'theme/theme';\r\n\r\nfunction SmileChatItem(props) {\r\n  const login = props.login;\r\n  const messagePack = props.messagePack;\r\n  if (messagePack.from === login) {\r\n    return (\r\n      <ThemeProvider theme={theme}>\r\n        <div className=\"row chat-page-item justify-content-end\">\r\n          <div className=\"my-message\">\r\n            <div className=\"col-auto message-wrapper my-message-wrapper\">\r\n              <div className=\"col-auto chat-item-from\">{messagePack.from}</div>\r\n              <div className=\"col-auto chat-item-message\">\r\n                {findSmile(messagePack.message).map((mes, m) => {\r\n                  if (typeof mes === 'string') {\r\n                    return <span key={m}>{mes}</span>;\r\n                  }\r\n                  return <img key={m} width=\"32\" height=\"32\" src={makeSRC(mes[0])} alt={mes[0]} />;\r\n                })}\r\n              </div>\r\n              <div className=\"col-auto chat-item-date\">{getDate(messagePack.time)}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </ThemeProvider>\r\n    );\r\n  }\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <div className=\"row chat-page-item justify-content-start\">\r\n        <div className=\"their-message\">\r\n          <div className=\"col-auto message-wrapper their-message-wrapper\">\r\n            <div className=\"col-auto chat-item-from\">{messagePack.from}</div>\r\n            <div className=\"col-auto chat-item-message\">\r\n              {findSmile(messagePack.message).map((mes, m) => {\r\n                if (typeof mes === 'string') {\r\n                  return <span key={m}>{mes}</span>;\r\n                }\r\n                return <img key={m} width=\"32\" height=\"32\" src={makeSRC(mes[0])} alt={mes[0]} />;\r\n              })}\r\n            </div>\r\n            <div className=\"col-auto chat-item-date\">{getDate(messagePack.time)}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nSmileChatItem.propTypes = {\r\n  login: PropTypes.string.isRequired,\r\n  messagePack: PropTypes.instanceOf(Object).isRequired\r\n};\r\n\r\nexport default SmileChatItem;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport theme from 'theme/theme';\r\n\r\nexport default function MyIconButton(props) {\r\n  const useStyles = makeStyles(() => ({\r\n    root: {\r\n      position: 'absolute'\r\n    },\r\n    iconHover: {\r\n      color: theme.palette[props.theme]['main'],\r\n      '&:hover': {\r\n        color: theme.palette[props.theme]['light']\r\n      },\r\n      '&:active': {\r\n        color: theme.palette[props.theme]['dark']\r\n      }\r\n    }\r\n  }));\r\n  const classes = useStyles();\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <IconButton\r\n        variant=\"contained\"\r\n        className={classes.iconHover}\r\n        style={{ outline: 'none' }}\r\n        onClick={props.onClickHandler}\r\n      >\r\n        {props.icon}\r\n      </IconButton>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nMyIconButton.propTypes = {\r\n  onClickHandler: PropTypes.func.isRequired,\r\n  theme: PropTypes.string.isRequired,\r\n  icon: PropTypes.element.isRequired\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport EmojiPicker from 'emojione-picker';\r\nimport 'emojione-picker/css/picker.css';\r\nimport { makeEmojiFromUnicode } from 'components/functions';\r\nimport 'components/ChatInput/chatInput.scss';\r\nimport MyIconButton from 'components/buttons/iconButtons';\r\nimport Icon from '@material-ui/core/Icon';\r\n\r\nclass ChatInput extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      emoji: false,\r\n      html: '',\r\n      attachment: false\r\n    };\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.setState(null);\r\n    this.mounted = false;\r\n  }\r\n\r\n  showSmilesOnHover() {\r\n    this.setState({ emoji: true });\r\n  }\r\n\r\n  hideSmilesOnMouseLeave() {\r\n    this.setState({ emoji: false });\r\n  }\r\n\r\n  toggleAttachBlock() {\r\n    if (this.state.attachment) {\r\n      this.setState({ attachment: false });\r\n    } else {\r\n      this.setState({ attachment: true });\r\n    }\r\n  }\r\n\r\n  handleChange = evt => {\r\n    this.setState({ html: evt.target.value });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"row chat-page-form justify-content-center align-items-center\">\r\n        <div className=\"input-area row justify-content-center align-items-center\">\r\n          <div className=\"media-selector\">\r\n            <MyIconButton\r\n              onClickHandler={() => this.toggleAttachBlock()}\r\n              theme=\"secondary\"\r\n              icon={<Icon>attach_file</Icon>}\r\n            />\r\n            <div className={`media-selector-info ${this.state.attachment ? '' : 'hidden'}`}>\r\n              Does not work yet\r\n            </div>\r\n          </div>\r\n          <span\r\n            id=\"inputChat\"\r\n            className=\"input-text-area row align-items-center\"\r\n            html={this.state.html}\r\n            onChange={this.handleChange}\r\n            contentEditable=\"true\"\r\n            aria-multiline=\"true\"\r\n            role=\"textbox\"\r\n            // role=\"button\"\r\n            tabIndex=\"-1\"\r\n            onClick={e => {\r\n              if ($(e.target).is('img')) {\r\n                var range = document.createRange();\r\n                $(e.target).focus();\r\n                range.selectNodeContents(e.target);\r\n                range.collapse(true);\r\n                range.setEndAfter(e.target);\r\n                var sel = window.getSelection();\r\n                sel.removeAllRanges();\r\n                sel.addRange(range);\r\n                $(\"#inputChat\").focus();\r\n                return false;\r\n              }\r\n            }}\r\n            onKeyPress={e => {\r\n              if (e.key === 'Enter' || e.which === 13 || e.keyCode === 13) {\r\n                e.preventDefault();\r\n                this.props.submitClickHandler();\r\n              }\r\n            }}\r\n          />\r\n          <div className=\"chat-buttons\">\r\n            <div\r\n              id=\"emoji-block\"\r\n              className=\"emoji-block\"\r\n              onMouseEnter={() => this.showSmilesOnHover()}\r\n              onMouseLeave={() => this.hideSmilesOnMouseLeave()}\r\n            >\r\n              <MyIconButton\r\n                onClickHandler={() => this.showSmilesOnHover()}\r\n                theme=\"secondary\"\r\n                icon={<Icon>emoji_emotions</Icon>}\r\n              />\r\n              <div className={`${this.state.emoji ? 'smile-block' : 'hidden'}`}>\r\n                <EmojiPicker\r\n                  id=\"emoji-box\"\r\n                  className=\"emoji-picker\"\r\n                  nonce=\"NONCE_GENERATED_WHEN_TRANSMITTING\"\r\n                  onChange={e => {\r\n                    this.setState({ html: makeEmojiFromUnicode(e) });\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"send-button\">\r\n              <MyIconButton\r\n                onClickHandler={() => this.props.submitClickHandler()}\r\n                theme=\"secondary\"\r\n                icon={<Icon>send</Icon>}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nChatInput.propTypes = {\r\n  submitClickHandler: PropTypes.func.isRequired\r\n};\r\n\r\nexport default ChatInput;\r\n","import BrowserWebSocket from 'browser-websocket';\r\nimport store from 'store/store';\r\n\r\nlet messages = [];\r\n\r\nexport default function connectSocket() {\r\n  const ws = new BrowserWebSocket('wss://websocket-gelj.onrender.com/');\r\n  // const ws = new BrowserWebSocket('ws://localhost:3000/');\r\n\r\n  ws.on('open', () => {\r\n    setTimeout(() => {\r\n      console.log('open', ws.ws.readyState);\r\n      store.dispatch({ type: 'status', value: ws.ws.readyState });\r\n    }, 300);\r\n  });\r\n  ws.on('close', () => {\r\n    console.log('connection closed', ws.ws.readyState, 'reconnecting');\r\n    store.dispatch({ type: 'status', value: ws.ws.readyState });\r\n    ws.reconnect();\r\n  })\r\n  ws.on('message', event => {\r\n    const mes = JSON.parse(event.data).splice(0, 100).reverse();\r\n    if (mes.length === 1) {\r\n      const newMes = `${mes[0].from}: ${mes[0].message}`;\r\n      messages.push(mes[0])\r\n      store.dispatch({ type: 'newMessage', value: newMes });\r\n      store.dispatch({ type: 'messages', value: mes });\r\n    } else {\r\n      if (messages.length === 0) {\r\n        messages = mes;\r\n        store.dispatch({ type: 'messages', value: mes });\r\n      }\r\n    }\r\n\r\n    const div = document.getElementById('messages-area');\r\n    if (div) {\r\n      setTimeout(() => {\r\n        div.scrollTo({ top: div.scrollHeight - div.clientHeight, behavior: 'smooth' });\r\n      }, 50);\r\n    }\r\n  });\r\n\r\n  return ws;\r\n}","import React from 'react';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport theme from 'theme/theme';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport store from 'store/store';\r\n\r\nconst CustomSwitch = withStyles({\r\n  switchBase: {\r\n    color: theme.palette.golden.dark,\r\n    '&$checked': {\r\n      color: theme.palette.primary.main,\r\n    },\r\n    '&$checked + $track': {\r\n      backgroundColor: theme.palette.primary.dark,\r\n    },\r\n  },\r\n  checked: {},\r\n  track: {},\r\n})(Switch);\r\n\r\nexport default function Switcher(props) {\r\n  const [state, setState] = React.useState({\r\n    checked: props.ignore,\r\n  });\r\n\r\n  const handleChange = name => event => {\r\n    setState({ ...state, [name]: event.target.checked });\r\n    store.dispatch({ type: 'switch', value: event.target.checked });\r\n  };\r\n\r\n  return (\r\n    <FormControlLabel\r\n      control={\r\n        <CustomSwitch\r\n          checked={state.checked}\r\n          onChange={handleChange('checked')}\r\n          value=\"checked\"\r\n        />\r\n      }\r\n      label=\"Notifications\"\r\n    />\r\n  );\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport MyIconButton from 'components/buttons/iconButtons';\r\nimport Icon from '@material-ui/core/Icon';\r\nimport SignalCellularConnectedNoInternet0BarIcon from '@material-ui/icons/SignalCellularConnectedNoInternet0Bar';\r\n\r\nexport default function Status(props) {\r\n  return (\r\n    <div className=\"status-block\">\r\n      {props.status === 1 ?\r\n        <MyIconButton\r\n          onClickHandler={() => undefined}\r\n          theme=\"success\"\r\n          icon={<Icon>checkIcon</Icon>}\r\n        /> :\r\n        <><span>reconnecting</span>\r\n          <MyIconButton\r\n            onClickHandler={() => undefined}\r\n            theme=\"fail\"\r\n            icon={<SignalCellularConnectedNoInternet0BarIcon />}\r\n          />\r\n        </>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nStatus.propTypes = {\r\n  status: PropTypes.number.isRequired\r\n};\r\n","/* eslint-disable consistent-return */\r\n/* eslint-disable array-callback-return */\r\n/* eslint-disable class-methods-use-this */\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport 'emojione-picker/css/picker.css';\r\nimport $ from 'jquery';\r\nimport store from 'store/store';\r\nimport { replaceSmileWithUnicode } from 'components/functions';\r\nimport 'containers/chatPage/chatPage.scss';\r\nimport TextChatItem from 'components/chatItems/textChatItem';\r\nimport SmileChatItem from 'components/chatItems/smileChatItem';\r\nimport ChatInput from 'components/ChatInput/ChatInput';\r\nimport connectSocket from 'components/functions/mySocket';\r\nimport Switcher from 'components/buttons/switcher';\r\nimport Status from 'components/wsStatus/wsStatus';\r\n\r\nclass Chat extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {};\r\n    this.mounted = false;\r\n    this.ws = connectSocket();\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n    const div = document.getElementById('messages-area');\r\n    setTimeout(() => {\r\n      if (div) {\r\n        div.scrollTo({ top: div.scrollHeight - div.clientHeight, behavior: 'instant' });\r\n      }\r\n    }, 1500);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  submitClickHandler() {\r\n    const mess = {\r\n      from: this.props.login,\r\n      message: replaceSmileWithUnicode($('#inputChat').html())\r\n    };\r\n    this.ws.emit(JSON.stringify(mess));\r\n    $('#inputChat').text('');\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"row chat-page justify-content-center align-items-center\"\r\n        onClick={() => store.dispatch({ type: 'activeInput', value: false })}\r\n        role=\"button\"\r\n        onKeyPress={undefined}\r\n        tabIndex=\"-1\"\r\n      >\r\n        <div className=\"switcher\">\r\n          <Switcher ignore={this.props.switch} />\r\n          <Status status={this.props.status} />\r\n        </div>\r\n        <div className=\"row chat-page-messages\">\r\n          <div id=\"messages-area\" className=\"messages-wrapper\">\r\n            {this.props.messages.map(item => {\r\n              if (item && item.message) {\r\n                if (item.message.match(/:\\w+:/gm)) {\r\n                  return <SmileChatItem key={item.id} login={this.props.login} messagePack={item} />;\r\n                }\r\n                return <TextChatItem key={item.id} login={this.props.login} messagePack={item} />;\r\n              }\r\n            })}\r\n          </div>\r\n        </div>\r\n        <ChatInput submitClickHandler={() => {\r\n          if (this.props.status === 1) {\r\n            this.submitClickHandler();\r\n          }\r\n        }\r\n        } />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nChat.propTypes = {\r\n  login: PropTypes.string.isRequired,\r\n  status: PropTypes.number.isRequired,\r\n  messages: PropTypes.array.isRequired,\r\n  switch: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]).isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  login: state.login,\r\n  status: state.status,\r\n  messages: state.messages,\r\n  switch: state.switch\r\n});\r\nexport default connect(mapStateToProps)(Chat);\r\n","import React, { Component } from 'react';\r\nimport { HashRouter as Router, Route, Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport Header from 'components/header/header';\r\nimport MainPage from 'containers/mainPage/mainPage';\r\nimport Footer from 'components/footer';\r\nimport Chat from 'containers/chatPage/chatPage';\r\nimport store from 'store/store';\r\nimport $ from 'jquery';\r\nimport Notifications from 'components/Notifications/notif';\r\n\r\nclass App extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {};\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <div className=\"container-fluid\" onClick={(e) => {\r\n          const input = $('#changeNameInput');\r\n          if ($(e.target).is('.container-fluid') || $(e.target).is('.header')) {\r\n            if (input) {\r\n              store.dispatch({ type: 'activeInput', value: false });\r\n            }\r\n          }\r\n        }}>\r\n          <Header />\r\n          <Route exact path=\"/\">\r\n            {this.props.login && this.props.login !== 'Guest' && this.props.redirect ? <Redirect to=\"/chat\" /> : <Redirect to=\"/\" />}\r\n          </Route>\r\n          <Route exact path=\"/chat\">\r\n            {this.props.login && this.props.login !== 'Guest' && this.props.redirect ? <Redirect to=\"/chat\" /> : <Redirect to=\"/\" />}\r\n          </Route>\r\n          <Route path=\"/\" exact component={MainPage} />\r\n          <Route path=\"/chat\" component={Chat} />\r\n          <Footer />\r\n          <Notifications />\r\n        </div>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nApp.propTypes = {\r\n  login: PropTypes.string.isRequired,\r\n  redirect: PropTypes.bool.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({ login: state.login, redirect: state.redirect });\r\nexport default connect(mapStateToProps)(App);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport 'index.css';\r\nimport App from 'app';\r\nimport store from 'store/store';\r\n\r\nlet vh = window.innerHeight * 0.01;\r\ndocument.documentElement.style.setProperty('--vh', `${vh}px`);\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n","import { createStore } from 'redux';\r\n\r\nlet switchOption;\r\n\r\nif (JSON.parse(localStorage.getItem('switch')) === undefined || JSON.parse(localStorage.getItem('switch')) === null) {\r\n  switchOption = true;\r\n  localStorage.setItem('switch', true);\r\n} else {\r\n  switchOption = JSON.parse(localStorage.getItem('switch'))\r\n}\r\n\r\nconst initialState = {\r\n  login: localStorage.getItem('login') || 'Guest',\r\n  messages: ['loading'],\r\n  activeInput: false,\r\n  status: 3,\r\n  newMessage: localStorage.getItem('newMes') || 'new message!',\r\n  switch: switchOption,\r\n  redirect: true\r\n};\r\n\r\nlet mesAll = [];\r\n\r\nfunction appState(state = initialState, action) {\r\n  switch (action.type) {\r\n    case 'login':\r\n      localStorage.setItem('login', action.value);\r\n      return Object.assign({}, state, {\r\n        login: action.value\r\n      });\r\n    case 'redirect':\r\n      return Object.assign({}, state, {\r\n        redirect: action.value\r\n      });\r\n    case 'switch':\r\n      localStorage.setItem('switch', action.value);\r\n      return Object.assign({}, state, {\r\n        switch: action.value\r\n      });\r\n    case 'newMessage':\r\n      return Object.assign({}, state, {\r\n        newMessage: action.value\r\n      });\r\n    case 'messages':\r\n      if (typeof action.value === 'object') {\r\n        for (const message in action.value) {\r\n          mesAll.push(action.value[message]);\r\n        }\r\n      }\r\n      return Object.assign({}, state, {\r\n        messages: [...mesAll]\r\n      });\r\n    case 'activeInput':\r\n      return Object.assign({}, state, {\r\n        activeInput: action.value\r\n      });\r\n    case 'status':\r\n      return Object.assign({}, state, {\r\n        status: action.value\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst store = createStore(appState);\r\n\r\nexport default store;\r\n"],"sourceRoot":""}
{"version":3,"sources":["assets/chat.png","components/Notifications/notif.js","components/Notifications/serviceWorker.js","components/functions/index.js","theme/theme.js","components/buttons/loginButton.js","components/buttons/loginInput.js","components/account/account.js","components/header/header.js","containers/mainPage/mainPage.js","components/footer/index.js","components/chatItems/textChatItem.js","components/chatItems/smileChatItem.js","components/buttons/iconButtons.js","components/ChatInput/ChatInput.js","components/functions/mySocket.js","components/buttons/switcher.js","components/wsStatus/wsStatus.js","containers/chatPage/chatPage.js","app.js","index.js","store/store.js","assets/sound.mp3"],"names":["module","exports","Notifications","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","this","call","state","ignore","_createClass","key","value","_this2","notifyMe","setTimeout","setState","switch","$","window","blur","activeWindow","focus","_this3","prop","newMessage","oldMes","localStorage","getItem","newProp","setItem","notificationSend","undefined","Notification","permission","text","match","message","smile","total","findSmile","map","item","i","concat","push","_this4","mes","showSmile","now","Date","title","options","tag","body","icon","lang","dir","sound","image","document","visibilityState","test","navigator","userAgent","requestPermission","result","serviceWorker","ready","then","registration","showNotification","catch","err","global","console","log","notification","onclick","event","preventDefault","close","store","dispatch","type","playSound","alert","trigger","React","createElement","id","preload","src","hidden","autostart","loop","Component","connect","__webpack_require__","d","__webpack_exports__","register","isLocalhost","Boolean","location","hostname","config","URL","process","href","origin","addEventListener","swUrl","fetch","response","contentType","headers","get","status","indexOf","unregister","reload","registerValidSW","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","error","getDate","makeSRC","replaceSmileWithUnicode","makeEmojiFromUnicode","jquery__WEBPACK_IMPORTED_MODULE_0__","jquery__WEBPACK_IMPORTED_MODULE_0___default","n","time","data","day","month","getMonth","hour","getHours","minutes","getMinutes","getFullYear","code","before","after","str","split","unicode","replaced","replace","img","Image","html","sel","range","getSelection","getRangeAt","rangeCount","deleteContents","innerHTML","lastNode","frag","createDocumentFragment","appendChild","insertNode","cloneRange","setStartAfter","collapse","removeAllRanges","addRange","selection","createRange","pasteHTML","pasteHtmlAtCaret","theme","createTheme","palette","primary","light","main","dark","contrastText","secondary","golden","success","fail","LoginButton","ThemeProvider","Button","variant","color","style","outline","onClick","showInputOnClick","CssTextField","withStyles","root","& label.Mui-focused","& .MuiInput-underline:after","borderBottomColor","& .MuiOutlinedInput-root","& fieldset","borderColor","&:hover fieldset","&.Mui-focused fieldset","TextField","useStyles","makeStyles","position","iconHover","cursor","top","right","&:hover","&:active","LoginInput","name","classes","_React$useState","useState","_React$useState2","_slicedToArray","values","setValues","label","onChange","_objectSpread","_defineProperty","target","onKeyPress","e","which","keyCode","getInputLogin","margin","backgroundColor","Icon","className","StyledMenu","paper","border","Menu","Object","assign","elevation","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","StyledMenuItem","&:focus","& .MuiListItemIcon-root, & .MuiListItemText-primary","MenuItem","Account","anchorEl","setAnchorEl","aria-controls","aria-haspopup","currentTarget","ArrowDropDownIcon","marginRight","keepMounted","open","onClose","editNameHandler","ListItemIcon","EditIcon","ListItemText","ChatIcon","Link","to","logOutHandler","LogOut","Header","_React$Component","active","isLoggedIn","login","val","length","Redirect","hasClass","activeInput","inputOnChange","logOutOnClick","showInput","chat","alt","accountButton","input","MainPage","inputActive","role","tabIndex","onClickHandler","Footer","TextChatItem","messagePack","from","SmileChatItem","m","width","height","MyIconButton","IconButton","ChatInput","handleChange","evt","emoji","attachment","mounted","toggleAttachBlock","__html","contentEditable","aria-multiline","is","selectNodeContents","setEndAfter","submitClickHandler","onMouseEnter","showSmilesOnHover","onMouseLeave","hideSmilesOnMouseLeave","EmojiPicker","nonce","messages","CustomSwitch","switchBase","&$checked","&$checked + $track","checked","track","Switch","Switcher","FormControlLabel","control","Status","Fragment","SignalCellularConnectedNoInternet0BarIcon","Chat","ws","BrowserWebSocket","on","readyState","reconnect","JSON","parse","splice","reverse","newMes","div","getElementById","scrollTo","scrollHeight","clientHeight","behavior","connectSocket","mess","emit","stringify","App","Router","Route","exact","path","redirect","component","vh","innerHeight","documentElement","setProperty","ReactDOM","render","Provider","switchOption","redux__WEBPACK_IMPORTED_MODULE_0__","initialState","mesAll","createStore","arguments","action","p"],"mappings":"2EAAAA,EAAAC,QAAA,suDCSMC,EAAa,SAAAC,GAAAC,YAAAF,EAAAC,GAAA,IAAAE,EAAAC,YAAAJ,GACjB,SAAAA,EAAYK,GAAO,IAAAC,EAIhB,OAJgBC,YAAAC,KAAAR,IACjBM,EAAAH,EAAAM,KAAAD,KAAMH,IACDK,MAAQ,CACXC,QAAQ,GACTL,EA4IF,OA3IAM,YAAAZ,EAAA,EAAAa,IAAA,oBAAAC,MAED,WAAoB,IAAAC,EAAAP,KAClBA,KAAKQ,WACLC,WAAW,WACTF,EAAKG,SAAS,CAAEP,QAAQI,EAAKV,MAAMc,UAClC,KACHC,IAAEC,QAAQC,KAAK,WACbP,EAAKG,SAAS,CAAEK,cAAc,MAEhCH,IAAEC,QAAQG,MAAM,WACdT,EAAKG,SAAS,CAAEK,cAAc,QAEjC,CAAAV,IAAA,4BAAAC,MAED,WAA4B,IAAAW,EAAAjB,KAC1BS,WAAW,WACT,IAAMS,EAAOD,EAAKpB,MAAMsB,WAClBC,EAASC,aAAaC,QAAQ,UAChCJ,IAASE,GAAqB,cAAXA,IACrBH,EAAKP,SAAS,CAAEa,QAASL,IACzBG,aAAaG,QAAQ,SAAUN,IACL,IAAtBD,EAAKf,MAAMC,QACbc,EAAKQ,iBAAiBP,KAGzB,KACHT,WAAW,gBACiBiB,IAAtBT,EAAKpB,MAAMc,SACbM,EAAKP,SAAS,CAAEP,QAAQc,EAAKpB,MAAMc,UACT,IAAtBM,EAAKpB,MAAMc,SACmB,WAA5BgB,aAAaC,YAAuD,YAA5BD,aAAaC,YACvDX,EAAKT,cAIV,OACJ,CAAAH,IAAA,YAAAC,MAED,SAAUuB,GACR,GAAIA,EAAKC,MAAM,WAAY,CACzB,IAAIC,EAAU,GACVC,EAAQ,GACRC,EAAQ,GAWZ,OAVkBC,YAAUL,GAClBM,IAAI,SAACC,EAAMC,GACC,kBAATD,EACTJ,EAAK,YAAAM,OAAeF,EAAK,GAAE,QAE3BL,GAAWK,IAGfH,EAAMM,KAAKP,GACXC,EAAMM,KAAKR,GACJE,EAEP,OAAOJ,IAEV,CAAAxB,IAAA,mBAAAC,MAED,SAAiByB,GAAS,IAAAS,EAAAxC,KAClByC,EAAMzC,KAAK0C,UAAUX,IAAY,MACjCY,EAAMC,KAAKD,MACXE,EAAK,+BAAAP,OAAkCK,GAIvCG,EAAU,CACdC,IAHUJ,EAIVK,KALQ,YAAAV,OAA8B,kBAARG,EAAmBA,EAAI,GAAKA,GAM1DQ,KAJW,yFAKXC,KAAM,KACNC,IAAK,MACLC,MAAOA,IACPC,MAAsB,kBAARZ,EAAmBA,EAAI,GAAK,IAE5CzC,KAAKU,SAAS,CACZmC,MAAOA,EACPC,QAASA,IAEP,iBAAkBjC,QAAuC,YAA7ByC,SAASC,kBACnC,iEAAiEC,KAAKC,UAAUC,WAClF/B,aAAagC,kBAAkB,SAACC,GACf,YAAXA,GACFH,UAAUI,cAAcC,MAAMC,KAAK,SAACC,GAClCA,EAAaC,iBAAiBzB,EAAKtC,MAAM2C,MAAOC,KAC/CoB,MAAM,SAACC,GAAG,OAAKC,EAAOC,QAAQC,IAAIH,QAIzCnE,KAAKuE,aAAe,IAAI5C,aAAa3B,KAAKE,MAAM2C,MAAOC,GACvD9C,KAAKuE,aAAaC,QAAU,SAACC,GAC3BA,EAAMC,iBACN7D,OAAOG,QACPwB,EAAK+B,aAAaI,QAClBC,IAAMC,SAAS,CAAEC,KAAM,WAAYxE,OAAO,KAE5CG,WAAW,WACT+B,EAAK+B,aAAaI,SACjB,MAELlE,WAAW,WACT+B,EAAKuC,aACJ,QAEN,CAAA1E,IAAA,WAAAC,MAED,WACEuD,MACM,iBAAkBhD,OAEe,YAA5Bc,aAAaC,YAAwD,YAA5BD,aAAaC,WAC/DD,aAAagC,kBAAkB,SAAC/B,GACX,YAAfA,GACF6B,UAAUI,cAAcC,MAAMC,KAAK,SAACC,GAClCA,EAAaC,iBAAiB,gDAC7BC,MAAM,SAACC,GAAG,OAAKC,EAAOC,QAAQC,IAAIH,OAGJ,WAA5BxC,aAAaC,aAAiD,IAAtB5B,KAAKH,MAAMc,SAC5DyD,EAAOY,MAAK,gIAEZJ,IAAMC,SAAS,CAAEC,KAAM,SAAUxE,OAAO,KAZxC8D,EAAOY,MAAM,wDAchB,CAAA3E,IAAA,YAAAC,MAED,WACkC,YAA5BqB,aAAaC,YACfhB,IAAE,UAAUqE,QAAQ,UAEvB,CAAA5E,IAAA,SAAAC,MAED,WACE,OACE4E,IAAAC,cAAA,SAAOC,GAAG,QAAQC,QAAQ,QACxBH,IAAAC,cAAA,UAAQG,IAAKlC,IAAO0B,KAAK,eACzBI,IAAAC,cAAA,SAAOI,QAAQ,EAAMC,UAAU,QAAQC,MAAM,EAAOH,IAAKlC,WAG9D5D,EAjJgB,CAASkG,aA0JbC,gBADS,SAAAzF,GAAK,MAAK,CAAEiB,WAAYjB,EAAMiB,WAAYR,OAAQT,EAAMS,SACjEgF,CAAyBnG,wDCnKxCoG,EAAAC,EAAAC,EAAA,sBAAAC,IAAA,IAAMC,EAAcC,QACW,cAA7BpF,OAAOqF,SAASC,UAEgB,UAA7BtF,OAAOqF,SAASC,UAEhBtF,OAAOqF,SAASC,SAASrE,MAC1B,2DAIG,SAASiE,EAASK,GACvB,GAA6C,kBAAmB3C,UAAW,CAGzE,GADkB,IAAI4C,IAAIC,GAAwBzF,OAAOqF,SAASK,MACpDC,SAAW3F,OAAOqF,SAASM,OAIvC,OAEF3F,OAAO4F,iBAAiB,OAAQ,WAC9B,IAAMC,EAAK,GAAApE,OAAMgE,GAAsB,sBAEnCN,IAgEV,SAAiCU,EAAON,GAEtCO,MAAMD,GACH3C,KAAK,SAAC6C,GAEL,IAAMC,EAAcD,EAASE,QAAQC,IAAI,gBAEnB,MAApBH,EAASI,QACU,MAAfH,IAA8D,IAAvCA,EAAYI,QAAQ,cAG/CxD,UAAUI,cAAcC,MAAMC,KAAK,SAACC,GAClCA,EAAakD,aAAanD,KAAK,WAC7BlD,OAAOqF,SAASiB,aAKpBC,EAAgBV,EAAON,KAG1BlC,MAAM,WACLG,QAAQC,IACN,mEArFA+C,CAAwBX,EAAON,GAI/B3C,UAAUI,cAAcC,MAAMC,KAAK,WACjCM,QAAQC,IACN,+GAMJ8C,EAAgBV,EAAON,MAM/B,SAASgB,EAAgBV,EAAON,GAC9B3C,UAAUI,cACPkC,SAASW,GACT3C,KAAK,SAACC,GACLA,EAAasD,cAAgB,WAC3B,IAAMC,EAAmBvD,EAAawD,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBrH,QACfuD,UAAUI,cAAc6D,YAI1BrD,QAAQC,IACN,gHAKE8B,GAAUA,EAAOuB,UACnBvB,EAAOuB,SAAS3D,KAMlBK,QAAQC,IAAI,sCAGR8B,GAAUA,EAAOwB,WACnBxB,EAAOwB,UAAU5D,UAO5BE,MAAM,SAAC2D,GACNxD,QAAQwD,MAAM,4CAA6CA,uCCnFjEjC,EAAAC,EAAAC,EAAA,sBAAAgC,IAAAlC,EAAAC,EAAAC,EAAA,sBAAAiC,IAAAnC,EAAAC,EAAAC,EAAA,sBAAA5D,IAAA0D,EAAAC,EAAAC,EAAA,sBAAAkC,IAAApC,EAAAC,EAAAC,EAAA,sBAAAmC,IAAA,IAAAC,EAAAtC,EAAA,IAAAuC,EAAAvC,EAAAwC,EAAAF,GAcO,SAASJ,EAAQO,GACtB,IAAMC,EAAO,IAAI1F,KAAKyF,GAClBE,EAAMD,EAAKR,UACXS,EAAM,KACRA,EAAG,IAAAjG,OAAOiG,IAEZ,IAAIC,EAAQF,EAAKG,WAAa,EAC1BD,EAAQ,KACVA,EAAK,IAAAlG,OAAOkG,IAEd,IAAIE,EAAOJ,EAAKK,WACZD,EAAO,KACTA,EAAI,IAAApG,OAAOoG,IAEb,IAAIE,EAAUN,EAAKO,aAInB,OAHID,EAAU,KACZA,EAAO,IAAAtG,OAAOsG,IAEhB,GAAAtG,OAAUoG,EAAI,KAAApG,OAAIsG,EAAO,KAAAtG,OAAIiG,EAAG,KAAAjG,OAAIkG,EAAK,KAAAlG,OAAIgG,EAAKQ,eAG7C,SAASf,EAAQgB,GACtB,kBAAAzG,OAAmByG,EAAI,QAGlB,SAAS7G,EAAUL,GAGxB,IAFA,IAAImH,EAASnH,EACPoH,EAAQ,GACPD,EAAOlH,MAAM,YAAY,CAC9B,IAAMoH,EAAMF,EAAOlH,MAAM,WAAW,GAC9BC,EAAUiH,EAAOG,MAAMD,GACvBE,EAAUF,EAAIC,MAAM,KAAK,GAG/B,GAFAF,EAAM1G,KAAKR,EAAQ,IACnBkH,EAAM1G,KAAK,CAAC6G,KACPrH,EAAQ,GAAGD,MAAM,WAEpB,OADAmH,EAAM1G,KAAKR,EAAQ,IACZkH,EAETD,EAASjH,EAAQ,GAEnB,OAAOkH,EAGF,SAASjB,EAAwBnG,GAEtC,IADA,IAAIwH,EAAWxH,GACwB,IAAhCwH,EAASpC,QAAQ,WAAkB,CACxC,IAAMiC,EAAMG,EAASC,QAAQ,SAAU,KACvCD,EAAWH,EAEb,MAAqC,IAA9BG,EAASpC,QAAQ,SAAgB,CACtC,IAAMiC,EAAMG,EAASC,QAAQ,OAAQ,IAAIA,QAAQ,QAAS,IAC1DD,EAAWH,EAEb,MAAsC,IAA/BG,EAASpC,QAAQ,UAAiB,CACvC,IAAMiC,EAAMG,EACTC,QAAQ,kCAAmC,IAAIA,QAAQ,UAAW,IACrED,EAAWH,EAEb,MAA0C,IAAnCG,EAASpC,QAAQ,cAAqB,CAC3C,IAAMiC,EAAMG,EACTC,QAAQ,OAAQ,IAChBA,QAAQ,cAAe,IACvBA,QAAQ,aAAc,IACtBA,QAAQ,iBAAkB,KAC1BA,QAAQ,QAAS,KACjBA,QAAQ,IAAK,IAChBD,EAAWH,EAGb,OAAOG,EA8BF,SAASpB,EAAqBxD,GACnC,IAAM8E,EAAM,IAAIC,MAAM,GAAI,IAC1BD,EAAIjE,IAAMyC,EAAQtD,EAAM2E,SACxBxI,IAAE,cAAcI,QA9BlB,SAA0ByI,GACxB,IAAIC,EACAC,EACJ,GAAI9I,OAAO+I,cAET,IADAF,EAAM7I,OAAO+I,gBACLC,YAAcH,EAAII,WAAY,EACpCH,EAAQD,EAAIG,WAAW,IACjBE,iBACKzG,SAAS6B,cAAc,OAC/B6E,UAAYP,EACf,IACIQ,EADEC,EAAO5G,SAAS6G,yBAEtBF,EAAWC,EAAKE,YAAYX,GAC5BE,EAAMU,WAAWH,GACbD,KACFN,EAAQA,EAAMW,cACRC,cAAcd,GACpBE,EAAMa,UAAS,GACfd,EAAIe,kBACJf,EAAIgB,SAASf,UAGRrG,SAASqH,WAAyC,YAA5BrH,SAASqH,UAAU7F,MAClDxB,SAASqH,UAAUC,cAAcC,UAAUpB,GAQ7CqB,CAAiBvB,4QClFJwB,EAjCDC,YAAY,CACxBC,QAAS,CACPC,QAAS,CACPC,MAAO,UACPC,KAAM,UACNC,KAAM,UACNC,aAAc,WAEhBC,UAAW,CACTJ,MAAO,UACPC,KAAM,UACNC,KAAM,UACNC,aAAc,WAEhBE,OAAQ,CACNL,MAAO,UACPC,KAAM,UACNC,KAAM,UACNC,aAAc,WAEhBG,QAAS,CACPN,MAAO,UACPC,KAAM,UACNC,KAAM,WAERK,KAAM,CACJP,MAAO,UACPC,KAAM,UACNC,KAAM,cCxBG,SAASM,EAAY9L,GAClC,OACEqF,IAAAC,cAACyG,IAAa,CAACb,MAAOA,GACpB7F,IAAAC,cAAC0G,IAAM,CACLC,QAAQ,YACRC,MAAM,YACNC,MAAO,CAAEC,QAAS,QAClBC,QAASrM,EAAMsM,kBAChB,yECPDC,EAAeC,YAAW,CAC9BC,KAAM,CACJC,sBAAuB,CACrBR,MAAOhB,EAAME,QAAQC,QAAQI,cAE/BkB,8BAA+B,CAC7BC,kBAAmB1B,EAAME,QAAQM,UAAUF,MAE7CqB,2BAA4B,CAC1BC,aAAc,CACZC,YAAa7B,EAAME,QAAQC,QAAQG,KACnCU,MAAOhB,EAAME,QAAQC,QAAQI,cAE/BuB,mBAAoB,CAClBD,YAAa7B,EAAME,QAAQM,UAAUF,MAEvCyB,yBAA0B,CACxBF,YAAa7B,EAAME,QAAQM,UAAUF,SAjBxBgB,CAqBlBU,KAEGC,EAAYC,YAAW,iBAAO,CAClCX,KAAM,CACJY,SAAU,YAEZC,UAAW,CACTC,OAAQ,UACRF,SAAU,WACVG,IAAK,OACLC,MAAO,MACPvB,MAAOhB,EAAME,QAAQC,QAAQG,KAC7BkC,UAAW,CACTxB,MAAOhB,EAAME,QAAQM,UAAUJ,OAEjCqC,WAAY,CACVzB,MAAOhB,EAAME,QAAQM,UAAUF,UAKtB,SAASoC,EAAW5N,GACjC,IAMqB6N,EANfC,EAAUX,IAEhBY,EAA4B1I,IAAM2I,SAAS,CACzCH,KAAM,KACNI,EAAAC,YAAAH,EAAA,GAFKI,EAAMF,EAAA,GAAEG,EAASH,EAAA,GAQxB,OACE5I,IAAAC,cAAA,YACED,IAAAC,cAACiH,EAAY,CACXhH,GAAG,aACH8I,MAAM,OACN5N,MAAO0N,EAAON,KACdS,UAVeT,EAUQ,OAVA,SAAAjJ,GAC3BwJ,EAASG,wBAAA,GAAMJ,GAAM,GAAAK,YAAA,GAAGX,EAAOjJ,EAAM6J,OAAOhO,WAUxCiO,WAAY,SAAAC,GACM,KAAZA,EAAEC,OAA8B,KAAdD,EAAEE,SAA4B,UAAVF,EAAEnO,KAC1CR,EAAM8O,iBAGVC,OAAO,SACP9C,QAAQ,WACRE,MAAO,CACL6C,gBAAiB9D,EAAME,QAAQC,QAAQC,SAG3CjG,IAAAC,cAAC2J,IAAI,CAACC,UAAWpB,EAAQR,UAAWjB,QAASrM,EAAM8O,eAAe,gIC7DlEK,EAAa3C,YAAW,CAC5B4C,MAAO,CACLC,OAAM,aAAA5M,OAAeyI,EAAME,QAAQM,UAAUJ,OAC7C0D,gBAAiB9D,EAAME,QAAQC,QAAQC,MACvCY,MAAOhB,EAAME,QAAQC,QAAQI,eAJde,CAMhB,SAAAxM,GAAK,OACNqF,IAAAC,cAACgK,IAAIC,OAAAC,OAAA,CACHC,UAAW,EACXC,mBAAoB,KACpBC,aAAc,CACZC,SAAU,SACVC,WAAY,UAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,WAEV7P,MAIF+P,EAAiBvD,YAAW,iBAAO,CACvCC,KAAM,CACJuD,UAAW,CACTC,sDAAuD,CACrD/D,MAAOhB,EAAME,QAAQC,QAAQI,kBAJde,CAQnB0D,KAEW,SAASC,EAAQnQ,GAC9B,IAAA+N,EAAgC1I,IAAM2I,SAAS,MAAKC,EAAAC,YAAAH,EAAA,GAA7CqC,EAAQnC,EAAA,GAAEoC,EAAWpC,EAAA,GAU5B,OACE5I,IAAAC,cAAA,WACED,IAAAC,cAACyG,IAAa,CAACb,MAAOA,GACpB7F,IAAAC,cAAC0G,IAAM,CACLsE,gBAAc,kBACdC,gBAAc,OACdtE,QAAQ,YACRC,MAAM,YACNG,QAhBR,SAAqBzH,GACnByL,EAAYzL,EAAM4L,gBAgBZrE,MAAO,CAAEC,QAAS,SAEjBpM,EAAM6N,KACPxI,IAAAC,cAACmL,IAAiB,CAACtE,MAAO,CAAEuE,YAAa,YAE3CrL,IAAAC,cAAC6J,EAAU,CACT5J,GAAG,kBACH6K,SAAUA,EACVO,aAAW,EACXC,KAAMxK,QAAQgK,GACdS,QAvBR,WACER,EAAY,QAwBNhL,IAAAC,cAACyK,EAAc,CACb1D,QAAS,WACPgE,EAAY,MACZrQ,EAAM8Q,oBAIRzL,IAAAC,cAACyL,IAAY,KACX1L,IAAAC,cAAC0L,IAAQ,OAEX3L,IAAAC,cAAC2L,IAAY,CAAC5F,QAAQ,iBAExBhG,IAAAC,cAACyK,EAAc,CACb1D,QAAS,WACPgE,EAAY,MACZtL,IAAMC,SAAS,CAAEC,KAAM,WAAYxE,OAAO,MAG5C4E,IAAAC,cAACyL,IAAY,KACX1L,IAAAC,cAAC4L,IAAQ,OAEX7L,IAAAC,cAAC6L,IAAI,CAACC,GAAG,QAAQlC,UAAU,cACzB7J,IAAAC,cAAC2L,IAAY,CAAC5F,QAAQ,gBAG1BhG,IAAAC,cAACyK,EAAc,CACb1D,QAAS,WACPgE,EAAY,MACZrQ,EAAMqR,kBAGRhM,IAAAC,cAACyL,IAAY,KACX1L,IAAAC,cAACgM,IAAM,OAETjM,IAAAC,cAAC6L,IAAI,CAACC,GAAG,IAAIlC,UAAU,cACrB7J,IAAAC,cAAC2L,IAAY,CAAC5F,QAAQ,iBC1GJ,IAE1BkG,EAAM,SAAAC,GAAA3R,YAAA0R,EAAAC,GAAA,IAAA1R,EAAAC,YAAAwR,GACV,SAAAA,IAAc,IAAAtR,EAOV,OAPUC,YAAAC,KAAAoR,IACZtR,EAAAH,EAAAM,KAAAD,OACKE,MAAQ,CACXwN,KAAM,GACN4D,QAAQ,EACRC,YAAY,EACZ1J,OAAO,GACP/H,EAkFH,OAjFAM,YAAAgR,EAAA,EAAA/Q,IAAA,qBAAAC,MAED,WACEN,KAAKU,SAAS,CAAEgN,KAAM1N,KAAKH,MAAM2R,MAAOD,WAAiC,UAArBvR,KAAKH,MAAM2R,UAChE,CAAAnR,IAAA,YAAAC,MAED,WACMN,KAAKE,MAAMoR,QACbtR,KAAKU,SAAS,CAAE4Q,QAAQ,IACxB1M,IAAMC,SAAS,CAAEC,KAAM,cAAexE,OAAO,MAE7CN,KAAKU,SAAS,CAAE4Q,QAAQ,IACxB1M,IAAMC,SAAS,CAAEC,KAAM,cAAexE,OAAO,OAEhD,CAAAD,IAAA,gBAAAC,MAED,WAAgB,IAAAC,EAAAP,KACR0N,EAAO9M,IAAE,eAAe6Q,MAC9B,GAAI/D,GAAQA,EAAKgE,QAAU,GAKzB,OAJA9M,IAAMC,SAAS,CAAEC,KAAM,QAASxE,MAAOoN,IACvC9I,IAAMC,SAAS,CAAEC,KAAM,WAAYxE,OAAO,IAC1CsE,IAAMC,SAAS,CAAEC,KAAM,cAAexE,OAAO,IAC7CN,KAAKU,SAAS,CAAE4Q,QAAQ,EAAOC,YAAY,EAAM7D,OAAM7F,OAAO,IACvD3C,IAAAC,cAACwM,IAAQ,CAACV,GAAG,UAEpBjR,KAAKU,SAAS,CAAEmH,OAAO,IACvBpH,WAAW,WACLG,IAAE,kBAAoBA,IAAE,gBAAgBgR,SAAS,WACnDrR,EAAKG,SAAS,CAAEmH,OAAO,KAExB,OAEN,CAAAxH,IAAA,QAAAC,MAED,WAAQ,IAAAW,EAAAjB,KACN,GAAIA,KAAKH,MAAMgS,YACb,OACE3M,IAAAC,cAAA,OAAKC,GAAG,kBAAkB2J,UAAU,qBAClC7J,IAAAC,cAACsI,EAAU,CAACkB,cAAe,SAAAH,GAAC,OAAIvN,EAAK6Q,cAActD,SAG1D,CAAAnO,IAAA,gBAAAC,MAED,WACEsE,IAAMC,SAAS,CAAEC,KAAM,QAASxE,MAAO,UACvCN,KAAKU,SAAS,CAAE6Q,YAAY,MAC7B,CAAAlR,IAAA,gBAAAC,MAED,WAAgB,IAAAkC,EAAAxC,KACd,OAAIA,KAAKE,MAAMqR,WAEXrM,IAAAC,cAAC6K,EAAO,CACNtC,KAAM1N,KAAKE,MAAMwN,KACjBiD,gBAAiB,kBAAM/L,IAAMC,SAAS,CAAEC,KAAM,cAAexE,OAAO,KACpE4Q,cAAe,kBAAM1O,EAAKuP,mBAIzB7M,IAAAC,cAACwG,EAAW,CAACQ,iBAAkB,kBAAM3J,EAAKwP,iBAClD,CAAA3R,IAAA,SAAAC,MAED,WACE,OACE4E,IAAAC,cAAA,OAAK4J,UAAU,yDACb7J,IAAAC,cAAC6L,IAAI,CACHjC,UAAU,sBACVkC,GAAG,IACH/E,QAAS,WACPtH,IAAMC,SAAS,CAAEC,KAAM,WAAYxE,OAAO,MAG5C4E,IAAAC,cAAA,OAAK4J,UAAU,wBAAwBzJ,IAAK2M,IAAMC,IAAI,KACtDhN,IAAAC,cAAA,MAAI4J,UAAU,aAAY,iBAE5B7J,IAAAC,cAAA,OAAK4J,UAAU,2BAA2B/O,KAAKmS,iBAC/CjN,IAAAC,cAAA,QAAM4J,UAAS,2BAAAzM,OAA6BtC,KAAKE,MAAM2H,MAAQ,GAAK,WAAY,+BAG/E7H,KAAKoS,aAGXhB,EA1FS,CAASlM,IAAMQ,WAmGZC,cADS,SAAAzF,GAAK,MAAK,CAAEsR,MAAOtR,EAAMsR,MAAOK,YAAa3R,EAAM2R,cAC5DlM,CAAyByL,GCzGlCiB,EAAQ,SAAAhB,GAAA3R,YAAA2S,EAAAhB,GAAA,IAAA1R,EAAAC,YAAAyS,GACZ,SAAAA,IAAc,IAAAvS,EAIV,OAJUC,YAAAC,KAAAqS,IACZvS,EAAAH,EAAAM,KAAAD,OACKE,MAAQ,CACXoS,aAAa,GACbxS,EA6DH,OA5DAM,YAAAiS,EAAA,EAAAhS,IAAA,iBAAAC,MAED,SAAekO,GACY,UAArBxO,KAAKH,MAAM2R,OACkB,IAA3BxR,KAAKE,MAAMoS,aACb1N,IAAMC,SAAS,CAAEC,KAAM,cAAexE,OAAO,IAC7CN,KAAKU,SAAS,CAAE4R,aAAa,IAC7B9D,EAAE9J,mBAEFE,IAAMC,SAAS,CAAEC,KAAM,cAAexE,OAAO,IAC7CN,KAAKU,SAAS,CAAE4R,aAAa,IAC7B9D,EAAE9J,mBAGJE,IAAMC,SAAS,CAAEC,KAAM,cAAexE,OAAO,IAC7CsE,IAAMC,SAAS,CAAEC,KAAM,WAAYxE,OAAO,OAE7C,CAAAD,IAAA,SAAAC,MAED,WAAS,IAAAC,EAAAP,KACP,OACEkF,IAAAC,cAAA,OACE4J,UAAU,yDACV7C,QAAS,kBAAM3L,EAAKL,MAAMoS,YAAc1N,IAAMC,SAAS,CAAEC,KAAM,cAAexE,OAAO,IAAW,MAChGiS,KAAK,SACLhE,gBAAY7M,EACZ8Q,SAAS,MAETtN,IAAAC,cAAC6L,IAAI,CAACC,GAAG,QAAQ/E,QAAS,SAAAsC,GAAC,OAAIjO,EAAKkS,eAAejE,KACjDtJ,IAAAC,cAAA,OAAK4J,UAAU,4CACb7J,IAAAC,cAAA,OAAK4J,UAAU,WACf7J,IAAAC,cAAA,OAAK4J,UAAU,gBACb7J,IAAAC,cAAA,OAAK4J,UAAU,WACf7J,IAAAC,cAAA,OAAK4J,UAAU,aAEjB7J,IAAAC,cAAA,QAAM4J,UAAU,SAAQ,KACxB7J,IAAAC,cAAA,QAAM4J,UAAU,SAAQ,KACxB7J,IAAAC,cAAA,QAAM4J,UAAU,SAAQ,KACxB7J,IAAAC,cAAA,QAAM4J,UAAU,SAAQ,KACxB7J,IAAAC,cAAA,QAAM4J,UAAU,UAChB7J,IAAAC,cAAA,QAAM4J,UAAU,SAAQ,KACxB7J,IAAAC,cAAA,QAAM4J,UAAU,SAAQ,KACxB7J,IAAAC,cAAA,QAAM4J,UAAU,SAAQ,KACxB7J,IAAAC,cAAA,QAAM4J,UAAU,UAChB7J,IAAAC,cAAA,QAAM4J,UAAU,UAAS,KACzB7J,IAAAC,cAAA,QAAM4J,UAAU,UAAS,KACzB7J,IAAAC,cAAA,QAAM4J,UAAU,UAAS,KACzB7J,IAAAC,cAAA,QAAM4J,UAAU,UAAS,KACzB7J,IAAAC,cAAA,QAAM4J,UAAU,UAAS,KACzB7J,IAAAC,cAAA,QAAM4J,UAAU,UAAS,KACzB7J,IAAAC,cAAA,QAAM4J,UAAU,UAAS,KACzB7J,IAAAC,cAAA,QAAM4J,UAAU,WAChB7J,IAAAC,cAAA,QAAM4J,UAAU,UAAS,KACzB7J,IAAAC,cAAA,QAAM4J,UAAU,UAAS,KACzB7J,IAAAC,cAAA,QAAM4J,UAAU,UAAS,KACzB7J,IAAAC,cAAA,QAAM4J,UAAU,UAAS,YAKlCsD,EAlEW,CAASnN,IAAMQ,WA0EdC,cADS,SAAAzF,GAAK,MAAK,CAAEsR,MAAOtR,EAAMsR,QAClC7L,CAAyB0M,GCjEzBK,MAbf,WACE,OACExN,IAAAC,cAAA,OAAK4J,UAAU,iCACb7J,IAAAC,cAAA,QAAM4J,UAAU,oBAAmB,wDAEjC7J,IAAAC,cAAA,KAAG4J,UAAU,+BAA+BxI,KAAK,mCAAkC,wCCuC5EoM,OAxCf,SAAsB9S,GACpB,IAAM2R,EAAQ3R,EAAM2R,MACdoB,EAAc/S,EAAM+S,YAC1B,OAAIA,EAAYC,OAASrB,EAErBtM,IAAAC,cAACyG,IAAa,CAACb,MAAOA,GACpB7F,IAAAC,cAAA,OAAK4J,UAAU,0CACb7J,IAAAC,cAAA,OAAK4J,UAAU,cACb7J,IAAAC,cAAA,OAAK4J,UAAU,+CACb7J,IAAAC,cAAA,OAAK4J,UAAU,2BAA2B6D,EAAYC,MACtD3N,IAAAC,cAAA,OAAK4J,UAAU,8BAA8B6D,EAAY7Q,SACzDmD,IAAAC,cAAA,OAAK4J,UAAU,2BAA2BjH,aAAQ8K,EAAYvK,WAQxEnD,IAAAC,cAACyG,IAAa,CAACb,MAAOA,GACpB7F,IAAAC,cAAA,OAAK4J,UAAU,4CACb7J,IAAAC,cAAA,OAAK4J,UAAU,iBACb7J,IAAAC,cAAA,OAAK4J,UAAU,kDACb7J,IAAAC,cAAA,OAAK4J,UAAU,2BAA2B6D,EAAYC,MACtD3N,IAAAC,cAAA,OAAK4J,UAAU,UACf7J,IAAAC,cAAA,OAAK4J,UAAU,8BAA8B6D,EAAY7Q,SACzDmD,IAAAC,cAAA,OAAK4J,UAAU,UACf7J,IAAAC,cAAA,OAAK4J,UAAU,2BAA2BjH,aAAQ8K,EAAYvK,YC0B3DyK,OApDf,SAAuBjT,GACrB,IAAM2R,EAAQ3R,EAAM2R,MACdoB,EAAc/S,EAAM+S,YAC1B,OAAIA,EAAYC,OAASrB,EAErBtM,IAAAC,cAACyG,IAAa,CAACb,MAAOA,GACpB7F,IAAAC,cAAA,OAAK4J,UAAU,0CACb7J,IAAAC,cAAA,OAAK4J,UAAU,cACb7J,IAAAC,cAAA,OAAK4J,UAAU,+CACb7J,IAAAC,cAAA,OAAK4J,UAAU,2BAA2B6D,EAAYC,MACtD3N,IAAAC,cAAA,OAAK4J,UAAU,8BACZ7M,aAAU0Q,EAAY7Q,SAASI,IAAI,SAACM,EAAKsQ,GACxC,MAAmB,kBAARtQ,EACFyC,IAAAC,cAAA,QAAM9E,IAAK0S,GAAItQ,GAEjByC,IAAAC,cAAA,OAAK9E,IAAK0S,EAAGC,MAAM,KAAKC,OAAO,KAAK3N,IAAKyC,aAAQtF,EAAI,IAAKyP,IAAKzP,EAAI,QAG9EyC,IAAAC,cAAA,OAAK4J,UAAU,2BAA2BjH,aAAQ8K,EAAYvK,WAQxEnD,IAAAC,cAACyG,IAAa,CAACb,MAAOA,GACpB7F,IAAAC,cAAA,OAAK4J,UAAU,4CACb7J,IAAAC,cAAA,OAAK4J,UAAU,iBACb7J,IAAAC,cAAA,OAAK4J,UAAU,kDACb7J,IAAAC,cAAA,OAAK4J,UAAU,2BAA2B6D,EAAYC,MACtD3N,IAAAC,cAAA,OAAK4J,UAAU,8BACZ7M,aAAU0Q,EAAY7Q,SAASI,IAAI,SAACM,EAAKsQ,GACxC,MAAmB,kBAARtQ,EACFyC,IAAAC,cAAA,QAAM9E,IAAK0S,GAAItQ,GAEjByC,IAAAC,cAAA,OAAK9E,IAAK0S,EAAGC,MAAM,KAAKC,OAAO,KAAK3N,IAAKyC,aAAQtF,EAAI,IAAKyP,IAAKzP,EAAI,QAG9EyC,IAAAC,cAAA,OAAK4J,UAAU,2BAA2BjH,aAAQ8K,EAAYvK,2CCvC3D,SAAS6K,GAAarT,GACnC,IAcM8N,EAdYV,YAAW,iBAAO,CAClCX,KAAM,CACJY,SAAU,YAEZC,UAAW,CACTpB,MAAOhB,EAAME,QAAQpL,EAAMkL,OAAa,KACxCwC,UAAW,CACTxB,MAAOhB,EAAME,QAAQpL,EAAMkL,OAAc,OAE3CyC,WAAY,CACVzB,MAAOhB,EAAME,QAAQpL,EAAMkL,OAAa,SAI9BiC,GAChB,OACE9H,IAAAC,cAACyG,IAAa,CAACb,MAAOA,GACpB7F,IAAAC,cAACgO,KAAU,CACTrH,QAAQ,YACRiD,UAAWpB,EAAQR,UACnBnB,MAAO,CAAEC,QAAS,QAClBC,QAASrM,EAAM4S,gBAEd5S,EAAMoD,OCzB2B,IAgI3BmQ,GA9HA,SAAA3T,GAAAC,YAAA0T,EAAA3T,GAAA,IAAAE,EAAAC,YAAAwT,GACb,SAAAA,IAAc,IAAAtT,EAOS,OAPTC,YAAAC,KAAAoT,IACZtT,EAAAH,EAAAM,KAAAD,OAkCFqT,aAAe,SAAAC,GACbxT,EAAKY,SAAS,CAAE+I,KAAM6J,EAAIhF,OAAOhO,SAlCjCR,EAAKI,MAAQ,CACXqT,OAAO,EACP9J,KAAM,GACN+J,YAAY,GAEd1T,EAAK2T,SAAU,EAAM3T,EA+GtB,OA9GAM,YAAAgT,EAAA,EAAA/S,IAAA,qBAAAC,MAED,WACEN,KAAKyT,SAAU,IAChB,CAAApT,IAAA,uBAAAC,MAED,WACEN,KAAKU,SAAS,MACdV,KAAKyT,SAAU,IAChB,CAAApT,IAAA,oBAAAC,MAED,WACEN,KAAKU,SAAS,CAAE6S,OAAO,MACxB,CAAAlT,IAAA,yBAAAC,MAED,WACEN,KAAKU,SAAS,CAAE6S,OAAO,MACxB,CAAAlT,IAAA,oBAAAC,MAED,WACMN,KAAKE,MAAMsT,WACbxT,KAAKU,SAAS,CAAE8S,YAAY,IAE5BxT,KAAKU,SAAS,CAAE8S,YAAY,MAE/B,CAAAnT,IAAA,SAAAC,MAMD,WAAS,IAAAC,EAAAP,KACP,OACEkF,IAAAC,cAAA,OAAK4J,UAAU,gEACb7J,IAAAC,cAAA,OAAK4J,UAAU,4DACb7J,IAAAC,cAAA,OAAK4J,UAAU,kBACb7J,IAAAC,cAAC+N,GAAY,CACXT,eAAgB,kBAAMlS,EAAKmT,qBAC3B3I,MAAM,YACN9H,KAAMiC,IAAAC,cAAC2J,IAAI,KAAC,iBAEd5J,IAAAC,cAAA,OAAK4J,UAAS,uBAAAzM,OAAyBtC,KAAKE,MAAMsT,WAAa,GAAK,WAAY,sBAIlFtO,IAAAC,cAAA,QACEC,GAAG,YACH2J,UAAU,yCACV4E,OAAQ3T,KAAKE,MAAMuJ,KACnB0E,SAAUnO,KAAKqT,aACfO,gBAAgB,OAChBC,iBAAe,OACftB,KAAK,UAELC,SAAS,KACTtG,QAAS,SAAAsC,GACP,GAAI5N,IAAE4N,EAAEF,QAAQwF,GAAG,OAAQ,CACzB,IAAInK,EAAQrG,SAASsH,cACrBhK,IAAE4N,EAAEF,QAAQtN,QACZ2I,EAAMoK,mBAAmBvF,EAAEF,QAC3B3E,EAAMa,UAAS,GACfb,EAAMqK,YAAYxF,EAAEF,QACpB,IAAI5E,EAAM7I,OAAO+I,eAIjB,OAHAF,EAAIe,kBACJf,EAAIgB,SAASf,GACb/I,IAAE,cAAcI,SACT,IAGXuN,WAAY,SAAAC,GACI,UAAVA,EAAEnO,KAA+B,KAAZmO,EAAEC,OAA8B,KAAdD,EAAEE,UAC3CF,EAAE9J,iBACFnE,EAAKV,MAAMoU,yBAIjB/O,IAAAC,cAAA,OAAK4J,UAAU,gBACb7J,IAAAC,cAAA,OACEC,GAAG,cACH2J,UAAU,cACVmF,aAAc,kBAAM3T,EAAK4T,qBACzBC,aAAc,kBAAM7T,EAAK8T,2BAEzBnP,IAAAC,cAAC+N,GAAY,CACXT,eAAgB,kBAAMlS,EAAK4T,qBAC3BpJ,MAAM,YACN9H,KAAMiC,IAAAC,cAAC2J,IAAI,KAAC,oBAEd5J,IAAAC,cAAA,OAAK4J,UAAS,GAAAzM,OAAKtC,KAAKE,MAAMqT,MAAQ,cAAgB,WACpDrO,IAAAC,cAACmP,KAAW,CACVlP,GAAG,YACH2J,UAAU,eACVwF,MAAM,oCACNpG,SAAU,SAAAK,GACRjO,EAAKG,SAAS,CAAE+I,KAAMxB,aAAqBuG,UAKnDtJ,IAAAC,cAAA,OAAK4J,UAAU,eACb7J,IAAAC,cAAC+N,GAAY,CACXT,eAAgB,kBAAMlS,EAAKV,MAAMoU,sBACjClJ,MAAM,YACN9H,KAAMiC,IAAAC,cAAC2J,IAAI,KAAC,kBAOzBsE,EAvHY,CAAS1N,kCCLpB8O,GAAW,2BCITC,GAAepI,YAAW,CAC9BqI,WAAY,CACV3I,MAAOhB,EAAME,QAAQO,OAAOH,KAC5BsJ,YAAa,CACX5I,MAAOhB,EAAME,QAAQC,QAAQE,MAE/BwJ,qBAAsB,CACpB/F,gBAAiB9D,EAAME,QAAQC,QAAQG,OAG3CwJ,QAAS,GACTC,MAAO,IAXYzI,CAYlB0I,MAEY,SAASC,GAASnV,GAC/B,IAIqB6N,EAJrBE,EAA0B1I,IAAM2I,SAAS,CACvCgH,QAAShV,EAAMM,SACf2N,EAAAC,YAAAH,EAAA,GAFK1N,EAAK4N,EAAA,GAAEpN,EAAQoN,EAAA,GAStB,OACE5I,IAAAC,cAAC8P,KAAgB,CACfC,QACEhQ,IAAAC,cAACsP,GAAY,CACXI,QAAS3U,EAAM2U,QACf1G,UAVaT,EAUU,UAVF,SAAAjJ,GAC3B/D,EAAQ0N,wBAAA,GAAMlO,GAAK,GAAAmO,YAAA,GAAGX,EAAOjJ,EAAM6J,OAAOuG,WAC1CjQ,IAAMC,SAAS,CAAEC,KAAM,SAAUxE,MAAOmE,EAAM6J,OAAOuG,YAS/CvU,MAAM,YAGV4N,MAAM,2CClCG,SAASiH,GAAOtV,GAC7B,OACEqF,IAAAC,cAAA,OAAK4J,UAAU,gBACK,IAAjBlP,EAAMmH,OACL9B,IAAAC,cAAC+N,GAAY,CACXT,eAAgB,aAChB1H,MAAM,UACN9H,KAAMiC,IAAAC,cAAC2J,IAAI,KAAC,eAEd5J,IAAAC,cAAAD,IAAAkQ,SAAA,KAAElQ,IAAAC,cAAA,YAAM,gBACND,IAAAC,cAAC+N,GAAY,CACXT,eAAgB,aAChB1H,MAAM,OACN9H,KAAMiC,IAAAC,cAACkQ,KAAyC,UCLV,IAE5CC,GAAI,SAAA7V,GAAAC,YAAA4V,EAAA7V,GAAA,IAAAE,EAAAC,YAAA0V,GACR,SAAAA,IAAc,IAAAxV,EAIc,OAJdC,YAAAC,KAAAsV,IACZxV,EAAAH,EAAAM,KAAAD,OACKE,MAAQ,GACbJ,EAAK2T,SAAU,EACf3T,EAAKyV,GHhBM,WACb,IAAMA,EAAK,IAAIC,KAAiB,uCAoChC,OAjCAD,EAAGE,GAAG,OAAQ,WACZhV,WAAW,WACT4D,QAAQC,IAAI,OAAQiR,EAAGA,GAAGG,YAC1B9Q,IAAMC,SAAS,CAAEC,KAAM,SAAUxE,MAAOiV,EAAGA,GAAGG,cAC7C,OAELH,EAAGE,GAAG,QAAS,WACbpR,QAAQC,IAAI,oBAAqBiR,EAAGA,GAAGG,WAAY,gBACnD9Q,IAAMC,SAAS,CAAEC,KAAM,SAAUxE,MAAOiV,EAAGA,GAAGG,aAC9CH,EAAGI,cAELJ,EAAGE,GAAG,UAAW,SAAAhR,GACf,IAAMhC,EAAMmT,KAAKC,MAAMpR,EAAM6D,MAAMwN,OAAO,EAAG,KAAKC,UAClD,GAAmB,IAAftT,EAAIiP,OAAc,CACpB,IAAMsE,EAAM,GAAA1T,OAAMG,EAAI,GAAGoQ,KAAI,MAAAvQ,OAAKG,EAAI,GAAGV,SACzCyS,GAASjS,KAAKE,EAAI,IAClBmC,IAAMC,SAAS,CAAEC,KAAM,aAAcxE,MAAO0V,IAC5CpR,IAAMC,SAAS,CAAEC,KAAM,WAAYxE,MAAOmC,SAElB,IAApB+R,GAAS9C,SACX8C,GAAW/R,EACXmC,IAAMC,SAAS,CAAEC,KAAM,WAAYxE,MAAOmC,KAI9C,IAAMwT,EAAM3S,SAAS4S,eAAe,iBAChCD,GACFxV,WAAW,WACTwV,EAAIE,SAAS,CAAE9I,IAAK4I,EAAIG,aAAeH,EAAII,aAAcC,SAAU,YAClE,MAIAf,EGrBKgB,GAAgBzW,EA+D3B,OA9DAM,YAAAkV,EAAA,EAAAjV,IAAA,qBAAAC,MAED,WACEN,KAAKyT,SAAU,IAChB,CAAApT,IAAA,oBAAAC,MAED,WACEN,KAAKyT,SAAU,EACf,IAAMwC,EAAM3S,SAAS4S,eAAe,iBACpCzV,WAAW,WACLwV,GACFA,EAAIE,SAAS,CAAE9I,IAAK4I,EAAIG,aAAeH,EAAII,aAAcC,SAAU,aAEpE,QACJ,CAAAjW,IAAA,uBAAAC,MAED,WACEN,KAAKyT,SAAU,IAChB,CAAApT,IAAA,qBAAAC,MAED,WACE,IAAMkW,EAAO,CACX3D,KAAM7S,KAAKH,MAAM2R,MACjBzP,QAASiG,aAAwBpH,IAAE,cAAc6I,SAEnDzJ,KAAKuV,GAAGkB,KAAKb,KAAKc,UAAUF,IAC5B5V,IAAE,cAAciB,KAAK,MACtB,CAAAxB,IAAA,SAAAC,MAED,WAAS,IAAAC,EAAAP,KACP,OACEkF,IAAAC,cAAA,OACE4J,UAAU,0DACV7C,QAAS,kBAAMtH,IAAMC,SAAS,CAAEC,KAAM,cAAexE,OAAO,KAC5DiS,KAAK,SACLhE,gBAAY7M,EACZ8Q,SAAS,MAETtN,IAAAC,cAAA,OAAK4J,UAAU,YACb7J,IAAAC,cAAC6P,GAAQ,CAAC7U,OAAQH,KAAKH,MAAMc,SAC7BuE,IAAAC,cAACgQ,GAAM,CAACnO,OAAQhH,KAAKH,MAAMmH,UAE7B9B,IAAAC,cAAA,OAAK4J,UAAU,0BACb7J,IAAAC,cAAA,OAAKC,GAAG,gBAAgB2J,UAAU,oBAC/B/O,KAAKH,MAAM2U,SAASrS,IAAI,SAAAC,GACvB,GAAIA,GAAQA,EAAKL,QACf,OAAIK,EAAKL,QAAQD,MAAM,WACdoD,IAAAC,cAAC2N,GAAa,CAACzS,IAAK+B,EAAKgD,GAAIoM,MAAOjR,EAAKV,MAAM2R,MAAOoB,YAAaxQ,IAErE8C,IAAAC,cAACwN,GAAY,CAACtS,IAAK+B,EAAKgD,GAAIoM,MAAOjR,EAAKV,MAAM2R,MAAOoB,YAAaxQ,QAKjF8C,IAAAC,cAACiO,GAAS,CAACa,mBAAoB,WACH,IAAtB1T,EAAKV,MAAMmH,QACbzG,EAAK0T,6BAMdqB,EApEO,CAAS5P,aAoFJC,eANS,SAAAzF,GAAK,MAAK,CAChCsR,MAAOtR,EAAMsR,MACbxK,OAAQ9G,EAAM8G,OACdwN,SAAUtU,EAAMsU,SAChB7T,OAAQT,EAAMS,SAEDgF,CAAyB2P,cCxFlCqB,GAAG,SAAAlX,GAAAC,YAAAiX,EAAAlX,GAAA,IAAAE,EAAAC,YAAA+W,GACP,SAAAA,IAAc,IAAA7W,EAEI,OAFJC,YAAAC,KAAA2W,IACZ7W,EAAAH,EAAAM,KAAAD,OACKE,MAAQ,GAAGJ,EA6BjB,OA5BAM,YAAAuW,EAAA,EAAAtW,IAAA,SAAAC,MAED,WACE,OACE4E,IAAAC,cAACyR,IAAM,KACL1R,IAAAC,cAAA,OAAK4J,UAAU,kBACb7C,QAAS,SAACsC,GACR,IAAM4D,EAAQxR,IAAE,qBACZA,IAAE4N,EAAEF,QAAQwF,GAAG,qBAAuBlT,IAAE4N,EAAEF,QAAQwF,GAAG,aACnD1B,GACFxN,IAAMC,SAAS,CAAEC,KAAM,cAAexE,OAAO,MAInD4E,IAAAC,cAACiM,EAAM,MACPlM,IAAAC,cAAC0R,IAAK,CAACC,OAAK,EAACC,KAAK,KACf/W,KAAKH,MAAM2R,OAA8B,UAArBxR,KAAKH,MAAM2R,OAAqBxR,KAAKH,MAAMmX,SAAW9R,IAAAC,cAACwM,IAAQ,CAACV,GAAG,UAAa/L,IAAAC,cAACwM,IAAQ,CAACV,GAAG,OAEpH/L,IAAAC,cAAC0R,IAAK,CAACC,OAAK,EAACC,KAAK,SACf/W,KAAKH,MAAM2R,OAA8B,UAArBxR,KAAKH,MAAM2R,OAAqBxR,KAAKH,MAAMmX,SAAW9R,IAAAC,cAACwM,IAAQ,CAACV,GAAG,UAAa/L,IAAAC,cAACwM,IAAQ,CAACV,GAAG,OAEpH/L,IAAAC,cAAC0R,IAAK,CAACE,KAAK,IAAID,OAAK,EAACG,UAAW5E,IACjCnN,IAAAC,cAAC0R,IAAK,CAACE,KAAK,QAAQE,UAAW3B,KAC/BpQ,IAAAC,cAACuN,EAAM,MACPxN,IAAAC,cAAC3F,KAAa,YAIrBmX,EAhCM,CAASjR,aAyCHC,eADS,SAAAzF,GAAK,MAAK,CAAEsR,MAAOtR,EAAMsR,MAAOwF,SAAU9W,EAAM8W,WACzDrR,CAAyBgR,IC9CpCO,GAA0B,IAArBrW,OAAOsW,YAChB7T,SAAS8T,gBAAgBpL,MAAMqL,YAAY,OAAM,GAAA/U,OAAK4U,GAAE,OAExDI,IAASC,OACPrS,IAAAC,cAACqS,IAAQ,CAAC5S,MAAOA,KACfM,IAAAC,cAACwR,GAAG,OAENrT,SAAS4S,eAAe,yCCd1B,IAEIuB,EAFJC,EAAA9R,EAAA,UAImDlE,IAA/CkU,KAAKC,MAAMxU,aAAaC,QAAQ,YAA2E,OAA/CsU,KAAKC,MAAMxU,aAAaC,QAAQ,YAC9FmW,GAAe,EACfpW,aAAaG,QAAQ,UAAU,IAE/BiW,EAAe7B,KAAKC,MAAMxU,aAAaC,QAAQ,WAGjD,IAAMqW,EAAe,CACnBnG,MAAOnQ,aAAaC,QAAQ,UAAY,QACxCkT,SAAU,CAAC,WACX3C,aAAa,EACb7K,OAAQ,EACR7F,WAAYE,aAAaC,QAAQ,WAAa,eAC9CX,OAAQ8W,EACRT,UAAU,GAGRY,EAAS,GA4Cb,IAAMhT,EAAQiT,YA1Cd,WAAgD,IAA9B3X,EAAK4X,UAAApG,OAAA,QAAAhQ,IAAAoW,UAAA,GAAAA,UAAA,GAAGH,EAAcI,EAAMD,UAAApG,OAAA,EAAAoG,UAAA,QAAApW,EAC5C,OAAQqW,EAAOjT,MACb,IAAK,QAEH,OADAzD,aAAaG,QAAQ,QAASuW,EAAOzX,OAC9B8O,OAAOC,OAAO,GAAInP,EAAO,CAC9BsR,MAAOuG,EAAOzX,QAElB,IAAK,WACH,OAAO8O,OAAOC,OAAO,GAAInP,EAAO,CAC9B8W,SAAUe,EAAOzX,QAErB,IAAK,SAEH,OADAe,aAAaG,QAAQ,SAAUuW,EAAOzX,OAC/B8O,OAAOC,OAAO,GAAInP,EAAO,CAC9BS,OAAQoX,EAAOzX,QAEnB,IAAK,aACH,OAAO8O,OAAOC,OAAO,GAAInP,EAAO,CAC9BiB,WAAY4W,EAAOzX,QAEvB,IAAK,WACH,GAA4B,kBAAjByX,EAAOzX,MAChB,IAAK,IAAMyB,KAAWgW,EAAOzX,MAC3BsX,EAAOrV,KAAKwV,EAAOzX,MAAMyB,IAG7B,OAAOqN,OAAOC,OAAO,GAAInP,EAAO,CAC9BsU,SAAQ,GAAAlS,OAAMsV,KAElB,IAAK,cACH,OAAOxI,OAAOC,OAAO,GAAInP,EAAO,CAC9B2R,YAAakG,EAAOzX,QAExB,IAAK,SACH,OAAO8O,OAAOC,OAAO,GAAInP,EAAO,CAC9B8G,OAAQ+Q,EAAOzX,QAEnB,QACE,OAAOJ,KAME0E,0BCnEftF,EAAAC,QAAiBqG,EAAAoS,EAAuB","file":"static/js/main.91a48418.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAABrVBMVEVHcEyZZpmNbaD/AP+NbJ+NbZ+Kbp+NbJ+NbZ+AgKqObJ+NbJ6NbJ+NbJ+NbJ+LbaCQcKGQcqSQcaOZZpmAgICYg6+NbJ+MbJ+Oa6CRcKGObqCNbaCOb6GOaKGPcKOJbZuObKCNbJ+Kap+MbaCNbJ+NbKCNbZ+MbZ+NbJ+NbZ+VapWqVaqObJ+ObZ+OcZyMbKCNbKCMbKCZeKGNbKCNbJ+NbJ/CzefO2e2st9D5467qzZjI0+rEz+iUfqvN2O3k6vSag7DV3u/M1+2chrKZgrDi6POchLHa4/Hfx6rS2+7j6fTDzufv1aCZg7D44azDzujU3O3e5PKXdp7P2u2bhbGzvtelpcSUfKqorsr54q7exqrq06yig6Hsz5rU3O7a4vHS3e/T3O3X4PDV3e7X3/DrzpmahLDny5jrzpq5mZzR3O62t9a4mpyst8++yuSuudGtuNHAy+WtudGuuNG9vdqjosKhnb+PcaKlp8Wqss2QdKSnq8mSeaiWhK6Xg66psMuTfamsttCPcKKqtM2pi6Ogm76niKO1maWVdKDmz6uObp/hyaqjhKL03a3ZwKq6p+DbAAAANXRSTlMABW4BwLwl5YgGh4nm6dRLqFz1CgK9wc8rff3J/Rv+HOTiGFvu2496+soMAy3+ErvTdvzz8XV3z8kAAAJrSURBVFjD7ZdVe9swFEBTtDNmZma+kWGZnSVNU9hKK60dMzNTx7zfPFlzHNvylSVvD3vofZBBOueTLFnfVS43Hf9F5GfOAqXQ9HxEoINy6BGBBjcK4rAJIXb9hpCHoEUEAGr8kcMASgKOLygIek4n8AqCnnNOF88rCC44Tvd5jrcVhtDVfZbnibzAJhcTeHlBwvdjt7ICjJcVoLykAOdxQYX/bdyCXfWu5RCPC1xecMwmZe96OcTLDEHQfymBmE8XpPAktjNxgjSexHYm4Sz8mYkoTwWWZZlmzd+ZhLPAZsLjzzR42xeY/reIDiHW/6N+/0tOKeALIgHGdzgdpTovEiB8p+NFp8+jgv4+hA/1gNUign5nYAjhg2/AajFB38B1lKejaPCYwB4S8CTEIwJ0/ByfKKicoC1c11tNZXpX9f5/9q5arhestuIiAgC2wtimzxar/44Ehe2/SxLcG74PYBiGVHF3+DYneGAYxaIhXdzhBIZixAQajKjxIzAYEYRSnNFbrMXbYkqKcy0iyOtaUDPGBB/F+ODNK5Z1qSFoxAJ44fFj72BjsF9aSPQmCBatgGeUfz8KbS1pglPHEwTL4Anl30zB+g05seBqr8dzgmZ4ZRiPnsO69tCWbwoiLlgKj5++Bli5NpdNMBfgJcCq5U2RJLSG87VYwjmHztCaxauFafCHcQqOf6o/zog0bp09b/7CeCIeWiMsTlLBBJJ0S8QW+EwF32F71pNB+7bdtAtfYV/ms4UOBybMn98OtmQVNLXCl1/mJOzK3IUdewF+TMLW7AeknfsP0QnY/DdnrD3NbZuWTB81/2X8BlOCJK5wgIZZAAAAAElFTkSuQmCC\"","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport * as serviceWorker from 'components/Notifications/serviceWorker';\r\nimport sound from 'assets/sound.mp3';\r\nimport $ from 'jquery';\r\nimport store from 'store/store';\r\nimport { findSmile } from 'components/functions/index';\r\n\r\nclass Notifications extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      ignore: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.notifyMe();\r\n    setTimeout(() => {\r\n      this.setState({ ignore: this.props.switch ? false : true });\r\n    }, 100);\r\n    $(window).blur(() => {\r\n      this.setState({ activeWindow: false });\r\n    })\r\n    $(window).focus(() => {\r\n      this.setState({ activeWindow: true });\r\n    })\r\n  }\r\n\r\n  componentWillReceiveProps() {\r\n    setTimeout(() => {\r\n      const prop = this.props.newMessage;\r\n      const oldMes = localStorage.getItem('newMes');\r\n      if (prop !== oldMes || oldMes === 'undefined') {\r\n        this.setState({ newProp: prop })\r\n        localStorage.setItem('newMes', prop)\r\n        if (this.state.ignore === false) {\r\n          this.notificationSend(prop)\r\n        }\r\n      }\r\n    }, 200);\r\n    setTimeout(() => {\r\n      if (this.props.switch !== undefined) {\r\n        this.setState({ ignore: this.props.switch ? false : true });\r\n        if (this.props.switch === true) {\r\n          if (Notification.permission === 'denied' || Notification.permission === 'default') {\r\n            this.notifyMe()\r\n          }\r\n        }\r\n      }\r\n    }, 200);\r\n  }\r\n\r\n  showSmile(text) {\r\n    if (text.match(/:\\w+:/gm)) {\r\n      let message = '';\r\n      let smile = '';\r\n      let total = [];\r\n      const smileText = findSmile(text);\r\n      smileText.map((item, i) => {\r\n        if (typeof item === 'object') {\r\n          smile = `./smiles/${item[0]}.png`;\r\n        } else {\r\n          message += item;\r\n        }\r\n      })\r\n      total.push(smile);\r\n      total.push(message);\r\n      return total;\r\n    } else {\r\n      return text;\r\n    }\r\n  }\r\n\r\n  notificationSend(message) {\r\n    const mes = this.showSmile(message) || '...';\r\n    const now = Date.now();\r\n    const title = `New message at Awesome Chat ${now}`;\r\n    const body = `Message: ${typeof mes === 'object' ? mes[1] : mes}`;\r\n    const tag = now;\r\n    const icon = 'http://mobilusoss.github.io/react-web-notification/example/Notifications_button_24.png';\r\n    const options = {\r\n      tag: tag,\r\n      body: body,\r\n      icon: icon,\r\n      lang: 'en',\r\n      dir: 'ltr',\r\n      sound: sound,\r\n      image: typeof mes === 'object' ? mes[0] : ''\r\n    }\r\n    this.setState({\r\n      title: title,\r\n      options: options\r\n    });\r\n    if ('Notification' in window && document.visibilityState !== 'visible') {\r\n      if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n        Notification.requestPermission((result) => {\r\n          if (result === 'granted') {\r\n            navigator.serviceWorker.ready.then((registration) => {\r\n              registration.showNotification(this.state.title, options);\r\n            }).catch((err) => global.console.log(err));\r\n          }\r\n        });\r\n      } else {\r\n        this.notification = new Notification(this.state.title, options);\r\n        this.notification.onclick = (event) => {\r\n          event.preventDefault();\r\n          window.focus();\r\n          this.notification.close();\r\n          store.dispatch({ type: 'redirect', value: true });\r\n        };\r\n        setTimeout(() => {\r\n          this.notification.close();\r\n        }, 2000);\r\n      }\r\n      setTimeout(() => {\r\n        this.playSound();\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  notifyMe() {\r\n    serviceWorker.register();\r\n    if (!('Notification' in window)) {\r\n      global.alert('This browser does not support desktop notification');\r\n    } else if (Notification.permission === 'granted' || Notification.permission === 'default') {\r\n      Notification.requestPermission((permission) => {\r\n        if (permission === 'granted') {\r\n          navigator.serviceWorker.ready.then((registration) => {\r\n            registration.showNotification('notification permissions have been granted');\r\n          }).catch((err) => global.console.log(err));\r\n        }\r\n      });\r\n    } else if (Notification.permission === 'denied' && this.props.switch === true) {\r\n      global.alert(`You blocked notification request :( \r\n    If you want to receive notifications you should unblock it in the browser settings`)\r\n      store.dispatch({ type: 'switch', value: false });\r\n    }\r\n  }\r\n\r\n  playSound() {\r\n    if (Notification.permission === 'granted') {\r\n      $('#sound').trigger('play');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <audio id='sound' preload='auto'>\r\n        <source src={sound} type='audio/mpeg' />\r\n        <embed hidden={true} autostart='false' loop={false} src={sound} />\r\n      </audio>\r\n    );\r\n  }\r\n}\r\n\r\nNotifications.propTypes = {\r\n  newMessage: PropTypes.string.isRequired,\r\n  switch: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]).isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({ newMessage: state.newMessage, switch: state.switch });\r\nexport default connect(mapStateToProps)(Notifications);","const isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost'\r\n  // [::1] is the IPv6 localhost address.\r\n  || window.location.hostname === '[::1]'\r\n  // 127.0.0.1/8 is considered localhost for IPv4.\r\n  || window.location.hostname.match(\r\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\r\n  ),\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service '\r\n            + 'worker. To learn more, visit http://bit.ly/CRA-PWA',\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all '\r\n                + 'tabs for this page are closed. See http://bit.ly/CRA-PWA.',\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404\r\n        || (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.',\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then((registration) => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}","/* eslint-disable no-cond-assign */\r\n/* eslint-disable no-bitwise */\r\nimport $ from 'jquery';\r\n\r\nexport function makeRandomId() {\r\n  const j = [];\r\n  let x;\r\n  for (let i = 0; i < 20; i += 1) {\r\n    x = [[48, 57], [65, 90], [97, 122]][(Math.random() * 3) >> 0];\r\n    j[i] = String.fromCharCode(((Math.random() * (x[1] - x[0] + 1)) >> 0) + x[0]);\r\n  }\r\n  return j.join('');\r\n}\r\n\r\nexport function getDate(time) {\r\n  const data = new Date(time);\r\n  let day = data.getDate();\r\n  if (day < 10) {\r\n    day = `0${day}`;\r\n  }\r\n  let month = data.getMonth() + 1;\r\n  if (month < 10) {\r\n    month = `0${month}`;\r\n  }\r\n  let hour = data.getHours();\r\n  if (hour < 10) {\r\n    hour = `0${hour}`;\r\n  }\r\n  let minutes = data.getMinutes();\r\n  if (minutes < 10) {\r\n    minutes = `0${minutes}`;\r\n  }\r\n  return `${hour}:${minutes} ${day}/${month}/${data.getFullYear()}`;\r\n}\r\n\r\nexport function makeSRC(code) {\r\n  return `./smiles/${code}.png`;\r\n}\r\n\r\nexport function findSmile(text) {\r\n  let before = text;\r\n  const after = [];\r\n  while (before.match(/:\\w+:/gm)) {\r\n    const str = before.match(/:\\w+:/gm)[0];\r\n    const message = before.split(str);\r\n    const unicode = str.split(':')[1];\r\n    after.push(message[0]);\r\n    after.push([unicode]);\r\n    if (!message[1].match(/:\\w+:/gm)) {\r\n      after.push(message[1]);\r\n      return after;\r\n    }\r\n    before = message[1];\r\n  }\r\n  return after;\r\n}\r\n\r\nexport function replaceSmileWithUnicode(text) {\r\n  let replaced = text;\r\n  while (replaced.indexOf('&nbsp;') !== -1) {\r\n    const str = replaced.replace('&nbsp;', ' ');\r\n    replaced = str;\r\n  }\r\n  while (replaced.indexOf('<br>') !== -1) {\r\n    const str = replaced.replace('<br>', '').replace('</br>', '');\r\n    replaced = str;\r\n  }\r\n  while (replaced.indexOf('<span') !== -1) {\r\n    const str = replaced\r\n      .replace('<span style=\"font-size: 1rem;\">', '').replace('</span>', '');\r\n    replaced = str;\r\n  }\r\n  while (replaced.indexOf('./smiles/') !== -1) {\r\n    const str = replaced\r\n      .replace('<img', '')\r\n      .replace('height=\"32\"', '')\r\n      .replace('width=\"32\"', '')\r\n      .replace('src=\"./smiles/', ':')\r\n      .replace('.png\"', ':')\r\n      .replace('>', '');\r\n    replaced = str;\r\n  }\r\n\r\n  return replaced;\r\n}\r\n\r\nfunction pasteHtmlAtCaret(html) {\r\n  let sel;\r\n  let range;\r\n  if (window.getSelection) {\r\n    sel = window.getSelection();\r\n    if (sel.getRangeAt && sel.rangeCount) {\r\n      range = sel.getRangeAt(0);\r\n      range.deleteContents();\r\n      const el = document.createElement('div');\r\n      el.innerHTML = html;\r\n      const frag = document.createDocumentFragment();\r\n      let lastNode;\r\n      lastNode = frag.appendChild(html);\r\n      range.insertNode(frag);\r\n      if (lastNode) {\r\n        range = range.cloneRange();\r\n        range.setStartAfter(html);\r\n        range.collapse(true);\r\n        sel.removeAllRanges();\r\n        sel.addRange(range);\r\n      }\r\n    }\r\n  } else if (document.selection && document.selection.type !== 'Control') {\r\n    document.selection.createRange().pasteHTML(html);\r\n  }\r\n}\r\n\r\nexport function makeEmojiFromUnicode(event) {\r\n  const img = new Image(32, 32);\r\n  img.src = makeSRC(event.unicode);\r\n  $('#inputChat').focus();\r\n  pasteHtmlAtCaret(img);\r\n}\r\n","import { createTheme } from '@material-ui/core/styles';\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      light: '#e7f2ff', // light\r\n      main: '#b4bff1',\r\n      dark: '#838fbe',\r\n      contrastText: '#292733'\r\n    },\r\n    secondary: {\r\n      light: '#524f5c', // dark\r\n      main: '#454153',\r\n      dark: '#292733',\r\n      contrastText: '#fce8c5'\r\n    },\r\n    golden: {\r\n      light: '#ffffc5',\r\n      main: '#fad694',\r\n      dark: '#c6a565',\r\n      contrastText: '#292733'\r\n    },\r\n    success: {\r\n      light: '#e6ffe6',\r\n      main: '#2ac92a',\r\n      dark: '#288028',\r\n    },\r\n    fail: {\r\n      light: '#fff7f5',\r\n      main: '#f54922',\r\n      dark: '#b53c21'\r\n    }\r\n  }\r\n});\r\n\r\nexport default theme;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport theme from 'theme/theme';\r\n\r\nexport default function LoginButton(props) {\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"secondary\"\r\n        style={{ outline: 'none' }}\r\n        onClick={props.showInputOnClick}\r\n      >\r\n        Log In\r\n      </Button>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nLoginButton.propTypes = {\r\n  showInputOnClick: PropTypes.func.isRequired\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Icon from '@material-ui/core/Icon';\r\nimport theme from 'theme/theme';\r\n\r\nconst CssTextField = withStyles({\r\n  root: {\r\n    '& label.Mui-focused': {\r\n      color: theme.palette.primary.contrastText\r\n    },\r\n    '& .MuiInput-underline:after': {\r\n      borderBottomColor: theme.palette.secondary.dark\r\n    },\r\n    '& .MuiOutlinedInput-root': {\r\n      '& fieldset': {\r\n        borderColor: theme.palette.primary.dark,\r\n        color: theme.palette.primary.contrastText\r\n      },\r\n      '&:hover fieldset': {\r\n        borderColor: theme.palette.secondary.dark\r\n      },\r\n      '&.Mui-focused fieldset': {\r\n        borderColor: theme.palette.secondary.dark\r\n      }\r\n    }\r\n  }\r\n})(TextField);\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    position: 'absolute'\r\n  },\r\n  iconHover: {\r\n    cursor: 'pointer',\r\n    position: 'absolute',\r\n    top: '31px',\r\n    right: '5px',\r\n    color: theme.palette.primary.dark,\r\n    '&:hover': {\r\n      color: theme.palette.secondary.light\r\n    },\r\n    '&:active': {\r\n      color: theme.palette.secondary.dark\r\n    }\r\n  }\r\n}));\r\n\r\nexport default function LoginInput(props) {\r\n  const classes = useStyles();\r\n\r\n  const [values, setValues] = React.useState({\r\n    name: ''\r\n  });\r\n\r\n  const handleChange = name => event => {\r\n    setValues({ ...values, [name]: event.target.value });\r\n  };\r\n\r\n  return (\r\n    <form>\r\n      <CssTextField\r\n        id=\"inputLogin\"\r\n        label=\"Name\"\r\n        value={values.name}\r\n        onChange={handleChange('name')}\r\n        onKeyPress={e => {\r\n          if (e.which === 13 || e.keyCode === 13 || e.key === 'enter') {\r\n            props.getInputLogin();\r\n          }\r\n        }}\r\n        margin=\"normal\"\r\n        variant=\"outlined\"\r\n        style={{\r\n          backgroundColor: theme.palette.primary.light\r\n        }}\r\n      />\r\n      <Icon className={classes.iconHover} onClick={props.getInputLogin}>\r\n        send\r\n      </Icon>\r\n    </form>\r\n  );\r\n}\r\n\r\nLoginInput.propTypes = {\r\n  getInputLogin: PropTypes.func.isRequired\r\n};\r\n","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport LogOut from '@material-ui/icons/PowerOff';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\nimport theme from 'theme/theme';\r\nimport store from 'store/store';\r\n\r\nconst StyledMenu = withStyles({\r\n  paper: {\r\n    border: `1px solid ${theme.palette.secondary.light}`,\r\n    backgroundColor: theme.palette.primary.light,\r\n    color: theme.palette.primary.contrastText\r\n  }\r\n})(props => (\r\n  <Menu\r\n    elevation={0}\r\n    getContentAnchorEl={null}\r\n    anchorOrigin={{\r\n      vertical: 'bottom',\r\n      horizontal: 'center'\r\n    }}\r\n    transformOrigin={{\r\n      vertical: 'top',\r\n      horizontal: 'center'\r\n    }}\r\n    {...props}\r\n  />\r\n));\r\n\r\nconst StyledMenuItem = withStyles(() => ({\r\n  root: {\r\n    '&:focus': {\r\n      '& .MuiListItemIcon-root, & .MuiListItemText-primary': {\r\n        color: theme.palette.primary.contrastText\r\n      }\r\n    }\r\n  }\r\n}))(MenuItem);\r\n\r\nexport default function Account(props) {\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n  function handleClick(event) {\r\n    setAnchorEl(event.currentTarget);\r\n  }\r\n\r\n  function handleClose() {\r\n    setAnchorEl(null);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <ThemeProvider theme={theme}>\r\n        <Button\r\n          aria-controls=\"customized-menu\"\r\n          aria-haspopup=\"true\"\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={handleClick}\r\n          style={{ outline: 'none' }}\r\n        >\r\n          {props.name}\r\n          <ArrowDropDownIcon style={{ marginRight: '-10px' }} />\r\n        </Button>\r\n        <StyledMenu\r\n          id=\"customized-menu\"\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleClose}\r\n        >\r\n          <StyledMenuItem\r\n            onClick={() => {\r\n              setAnchorEl(null);\r\n              props.editNameHandler();\r\n            }}\r\n          // onBlur={() => store.dispatch({ type: 'activeInput', value: false })}\r\n          >\r\n            <ListItemIcon>\r\n              <EditIcon />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"Change Name\" />\r\n          </StyledMenuItem>\r\n          <StyledMenuItem\r\n            onClick={() => {\r\n              setAnchorEl(null);\r\n              store.dispatch({ type: 'redirect', value: true })\r\n            }}\r\n          >\r\n            <ListItemIcon>\r\n              <ChatIcon />\r\n            </ListItemIcon>\r\n            <Link to=\"/chat\" className=\"menu-links\">\r\n              <ListItemText primary=\"Join Chat\" />\r\n            </Link>\r\n          </StyledMenuItem>\r\n          <StyledMenuItem\r\n            onClick={() => {\r\n              setAnchorEl(null);\r\n              props.logOutHandler();\r\n            }}\r\n          >\r\n            <ListItemIcon>\r\n              <LogOut />\r\n            </ListItemIcon>\r\n            <Link to=\"/\" className=\"menu-links\">\r\n              <ListItemText primary=\"Log Out\" />\r\n            </Link>\r\n          </StyledMenuItem>\r\n        </StyledMenu>\r\n      </ThemeProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nAccount.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  editNameHandler: PropTypes.func.isRequired,\r\n  logOutHandler: PropTypes.func.isRequired\r\n};\r\n","/* eslint-disable consistent-return */\r\nimport React from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport chat from 'assets/chat.png';\r\nimport LoginButton from 'components/buttons/loginButton';\r\nimport LoginInput from 'components/buttons/loginInput';\r\nimport Account from 'components/account/account';\r\nimport store from 'store/store';\r\n\r\nclass Header extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      name: '',\r\n      active: false,\r\n      isLoggedIn: false,\r\n      error: false\r\n    };\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.setState({ name: this.props.login, isLoggedIn: this.props.login !== 'Guest' ? true : false });\r\n  }\r\n\r\n  showInput() {\r\n    if (this.state.active) {\r\n      this.setState({ active: false });\r\n      store.dispatch({ type: 'activeInput', value: false });\r\n    } else {\r\n      this.setState({ active: true });\r\n      store.dispatch({ type: 'activeInput', value: true });\r\n    }\r\n  }\r\n\r\n  inputOnChange() {\r\n    const name = $('#inputLogin').val();\r\n    if (name && name.length <= 20) {\r\n      store.dispatch({ type: 'login', value: name });\r\n      store.dispatch({ type: 'redirect', value: true });\r\n      store.dispatch({ type: 'activeInput', value: false });\r\n      this.setState({ active: false, isLoggedIn: true, name, error: false });\r\n      return <Redirect to=\"/chat\" />\r\n    } else {\r\n      this.setState({ error: true });\r\n      setTimeout(() => {\r\n        if ($('.input-error') && !$('.input-error').hasClass('hidden')) {\r\n          this.setState({ error: false });\r\n        }\r\n      }, 5000);\r\n    }\r\n  }\r\n\r\n  input() {\r\n    if (this.props.activeInput) {\r\n      return (\r\n        <div id=\"changeNameInput\" className=\"login-input-block\">\r\n          <LoginInput getInputLogin={e => this.inputOnChange(e)} />\r\n        </div>);\r\n    }\r\n  }\r\n\r\n  logOutOnClick() {\r\n    store.dispatch({ type: 'login', value: 'Guest' });\r\n    this.setState({ isLoggedIn: false });\r\n  }\r\n\r\n  accountButton() {\r\n    if (this.state.isLoggedIn) {\r\n      return (\r\n        <Account\r\n          name={this.state.name}\r\n          editNameHandler={() => store.dispatch({ type: 'activeInput', value: true })}\r\n          logOutHandler={() => this.logOutOnClick()}\r\n        />\r\n      );\r\n    }\r\n    return <LoginButton showInputOnClick={() => this.showInput()} />;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"row header justify-content-between align-items-center\">\r\n        <Link\r\n          className=\"col-auto icon-block\"\r\n          to=\"/\"\r\n          onClick={() => {\r\n            store.dispatch({ type: 'redirect', value: false });\r\n          }}\r\n        >\r\n          <img className=\"header-img d-sm-block\" src={chat} alt=\"\" />\r\n          <h5 className=\"icon-name\">Awesome Chat</h5>\r\n        </Link>\r\n        <div className=\"col-auto account-button\">{this.accountButton()}</div>\r\n        <span className={`text-danger input-error ${this.state.error ? '' : 'hidden'}`}>\r\n          Input name (max 20 symbols)\r\n        </span>\r\n        {this.input()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nHeader.propTypes = {\r\n  login: PropTypes.string.isRequired,\r\n  activeInput: PropTypes.bool.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({ login: state.login, activeInput: state.activeInput });\r\nexport default connect(mapStateToProps)(Header);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport store from 'store/store';\r\n\r\nclass MainPage extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      inputActive: false\r\n    };\r\n  }\r\n\r\n  onClickHandler(e) {\r\n    if (this.props.login === 'Guest') {\r\n      if (this.state.inputActive === false) {\r\n        store.dispatch({ type: 'activeInput', value: true });\r\n        this.setState({ inputActive: true })\r\n        e.preventDefault();\r\n      } else {\r\n        store.dispatch({ type: 'activeInput', value: false });\r\n        this.setState({ inputActive: false })\r\n        e.preventDefault();\r\n      }\r\n    } else {\r\n      store.dispatch({ type: 'activeInput', value: false });\r\n      store.dispatch({ type: 'redirect', value: true });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"row justify-content-center align-items-center mainPage\"\r\n        onClick={() => this.state.inputActive ? store.dispatch({ type: 'activeInput', value: false }) : null}\r\n        role=\"button\"\r\n        onKeyPress={undefined}\r\n        tabIndex=\"-1\"\r\n      >\r\n        <Link to=\"/chat\" onClick={e => this.onClickHandler(e)}>\r\n          <div className=\"smile-text text-monospace text-uppercase\">\r\n            <div className=\"circle\" />\r\n            <div className=\"circle-blink\">\r\n              <div className=\"shadow\" />\r\n              <div className=\"blinked\" />\r\n            </div>\r\n            <span className=\"char1\">J</span>\r\n            <span className=\"char2\">o</span>\r\n            <span className=\"char3\">i</span>\r\n            <span className=\"char4\">n</span>\r\n            <span className=\"char5\" />\r\n            <span className=\"char6\">o</span>\r\n            <span className=\"char7\">u</span>\r\n            <span className=\"char8\">r</span>\r\n            <span className=\"char9\" />\r\n            <span className=\"char10\">a</span>\r\n            <span className=\"char11\">w</span>\r\n            <span className=\"char12\">e</span>\r\n            <span className=\"char13\">s</span>\r\n            <span className=\"char14\">o</span>\r\n            <span className=\"char15\">m</span>\r\n            <span className=\"char16\">e</span>\r\n            <span className=\"char17\" />\r\n            <span className=\"char18\">c</span>\r\n            <span className=\"char19\">h</span>\r\n            <span className=\"char20\">a</span>\r\n            <span className=\"char21\">t</span>\r\n          </div>\r\n        </Link>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMainPage.propTypes = {\r\n  login: PropTypes.string.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({ login: state.login });\r\nexport default connect(mapStateToProps)(MainPage);\r\n","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <div className=\"row align-items-center footer\">\r\n      <span className=\"rights text-wrap\">\r\n        © 2019 Aleksandra Skirnevskaia, Email for contacts\r\n        <a className=\"footer-mail font-weight-bold\" href=\"mailto:a.skirnevskaia@gmail.com\">\r\n          a.skirnevskaia@gmail.com\r\n        </a>\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { getDate } from 'components/functions';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport theme from 'theme/theme';\r\n\r\nfunction TextChatItem(props) {\r\n  const login = props.login;\r\n  const messagePack = props.messagePack;\r\n  if (messagePack.from === login) {\r\n    return (\r\n      <ThemeProvider theme={theme}>\r\n        <div className=\"row chat-page-item justify-content-end\">\r\n          <div className=\"my-message\">\r\n            <div className=\"col-auto message-wrapper my-message-wrapper\">\r\n              <div className=\"col-auto chat-item-from\">{messagePack.from}</div>\r\n              <div className=\"col-auto chat-item-message\">{messagePack.message}</div>\r\n              <div className=\"col-auto chat-item-date\">{getDate(messagePack.time)}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </ThemeProvider>\r\n    );\r\n  }\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <div className=\"row chat-page-item justify-content-start\">\r\n        <div className=\"their-message\">\r\n          <div className=\"col-auto message-wrapper their-message-wrapper\">\r\n            <div className=\"col-auto chat-item-from\">{messagePack.from}</div>\r\n            <div className=\"w-100\" />\r\n            <div className=\"col-auto chat-item-message\">{messagePack.message}</div>\r\n            <div className=\"w-100\" />\r\n            <div className=\"col-auto chat-item-date\">{getDate(messagePack.time)}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nTextChatItem.propTypes = {\r\n  login: PropTypes.string.isRequired,\r\n  messagePack: PropTypes.instanceOf(Object).isRequired\r\n};\r\n\r\nexport default TextChatItem;\r\n","/* eslint-disable react/no-array-index-key */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { getDate, findSmile, makeSRC } from 'components/functions';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport theme from 'theme/theme';\r\n\r\nfunction SmileChatItem(props) {\r\n  const login = props.login;\r\n  const messagePack = props.messagePack;\r\n  if (messagePack.from === login) {\r\n    return (\r\n      <ThemeProvider theme={theme}>\r\n        <div className=\"row chat-page-item justify-content-end\">\r\n          <div className=\"my-message\">\r\n            <div className=\"col-auto message-wrapper my-message-wrapper\">\r\n              <div className=\"col-auto chat-item-from\">{messagePack.from}</div>\r\n              <div className=\"col-auto chat-item-message\">\r\n                {findSmile(messagePack.message).map((mes, m) => {\r\n                  if (typeof mes === 'string') {\r\n                    return <span key={m}>{mes}</span>;\r\n                  }\r\n                  return <img key={m} width=\"32\" height=\"32\" src={makeSRC(mes[0])} alt={mes[0]} />;\r\n                })}\r\n              </div>\r\n              <div className=\"col-auto chat-item-date\">{getDate(messagePack.time)}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </ThemeProvider>\r\n    );\r\n  }\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <div className=\"row chat-page-item justify-content-start\">\r\n        <div className=\"their-message\">\r\n          <div className=\"col-auto message-wrapper their-message-wrapper\">\r\n            <div className=\"col-auto chat-item-from\">{messagePack.from}</div>\r\n            <div className=\"col-auto chat-item-message\">\r\n              {findSmile(messagePack.message).map((mes, m) => {\r\n                if (typeof mes === 'string') {\r\n                  return <span key={m}>{mes}</span>;\r\n                }\r\n                return <img key={m} width=\"32\" height=\"32\" src={makeSRC(mes[0])} alt={mes[0]} />;\r\n              })}\r\n            </div>\r\n            <div className=\"col-auto chat-item-date\">{getDate(messagePack.time)}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nSmileChatItem.propTypes = {\r\n  login: PropTypes.string.isRequired,\r\n  messagePack: PropTypes.instanceOf(Object).isRequired\r\n};\r\n\r\nexport default SmileChatItem;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport theme from 'theme/theme';\r\n\r\nexport default function MyIconButton(props) {\r\n  const useStyles = makeStyles(() => ({\r\n    root: {\r\n      position: 'absolute'\r\n    },\r\n    iconHover: {\r\n      color: theme.palette[props.theme]['main'],\r\n      '&:hover': {\r\n        color: theme.palette[props.theme]['light']\r\n      },\r\n      '&:active': {\r\n        color: theme.palette[props.theme]['dark']\r\n      }\r\n    }\r\n  }));\r\n  const classes = useStyles();\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <IconButton\r\n        variant=\"contained\"\r\n        className={classes.iconHover}\r\n        style={{ outline: 'none' }}\r\n        onClick={props.onClickHandler}\r\n      >\r\n        {props.icon}\r\n      </IconButton>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nMyIconButton.propTypes = {\r\n  onClickHandler: PropTypes.func.isRequired,\r\n  theme: PropTypes.string.isRequired,\r\n  icon: PropTypes.element.isRequired\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport EmojiPicker from 'emojione-picker';\r\nimport { makeEmojiFromUnicode } from 'components/functions';\r\nimport MyIconButton from 'components/buttons/iconButtons';\r\nimport Icon from '@material-ui/core/Icon';\r\n\r\nclass ChatInput extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      emoji: false,\r\n      html: '',\r\n      attachment: false\r\n    };\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.setState(null);\r\n    this.mounted = false;\r\n  }\r\n\r\n  showSmilesOnHover() {\r\n    this.setState({ emoji: true });\r\n  }\r\n\r\n  hideSmilesOnMouseLeave() {\r\n    this.setState({ emoji: false });\r\n  }\r\n\r\n  toggleAttachBlock() {\r\n    if (this.state.attachment) {\r\n      this.setState({ attachment: false });\r\n    } else {\r\n      this.setState({ attachment: true });\r\n    }\r\n  }\r\n\r\n  handleChange = evt => {\r\n    this.setState({ html: evt.target.value });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"row chat-page-form justify-content-center align-items-center\">\r\n        <div className=\"input-area row justify-content-center align-items-center\">\r\n          <div className=\"media-selector\">\r\n            <MyIconButton\r\n              onClickHandler={() => this.toggleAttachBlock()}\r\n              theme=\"secondary\"\r\n              icon={<Icon>attach_file</Icon>}\r\n            />\r\n            <div className={`media-selector-info ${this.state.attachment ? '' : 'hidden'}`}>\r\n              Does not work yet\r\n            </div>\r\n          </div>\r\n          <span\r\n            id=\"inputChat\"\r\n            className=\"input-text-area row align-items-center\"\r\n            __html={this.state.html}\r\n            onChange={this.handleChange}\r\n            contentEditable=\"true\"\r\n            aria-multiline=\"true\"\r\n            role=\"textbox\"\r\n            // role=\"button\"\r\n            tabIndex=\"-1\"\r\n            onClick={e => {\r\n              if ($(e.target).is('img')) {\r\n                var range = document.createRange();\r\n                $(e.target).focus();\r\n                range.selectNodeContents(e.target);\r\n                range.collapse(true);\r\n                range.setEndAfter(e.target);\r\n                var sel = window.getSelection();\r\n                sel.removeAllRanges();\r\n                sel.addRange(range);\r\n                $(\"#inputChat\").focus();\r\n                return false;\r\n              }\r\n            }}\r\n            onKeyPress={e => {\r\n              if (e.key === 'Enter' || e.which === 13 || e.keyCode === 13) {\r\n                e.preventDefault();\r\n                this.props.submitClickHandler();\r\n              }\r\n            }}\r\n          />\r\n          <div className=\"chat-buttons\">\r\n            <div\r\n              id=\"emoji-block\"\r\n              className=\"emoji-block\"\r\n              onMouseEnter={() => this.showSmilesOnHover()}\r\n              onMouseLeave={() => this.hideSmilesOnMouseLeave()}\r\n            >\r\n              <MyIconButton\r\n                onClickHandler={() => this.showSmilesOnHover()}\r\n                theme=\"secondary\"\r\n                icon={<Icon>emoji_emotions</Icon>}\r\n              />\r\n              <div className={`${this.state.emoji ? 'smile-block' : 'hidden'}`}>\r\n                <EmojiPicker\r\n                  id=\"emoji-box\"\r\n                  className=\"emoji-picker\"\r\n                  nonce=\"NONCE_GENERATED_WHEN_TRANSMITTING\"\r\n                  onChange={e => {\r\n                    this.setState({ html: makeEmojiFromUnicode(e) });\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"send-button\">\r\n              <MyIconButton\r\n                onClickHandler={() => this.props.submitClickHandler()}\r\n                theme=\"secondary\"\r\n                icon={<Icon>send</Icon>}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nChatInput.propTypes = {\r\n  submitClickHandler: PropTypes.func.isRequired\r\n};\r\n\r\nexport default ChatInput;\r\n","import BrowserWebSocket from 'browser-websocket';\r\nimport store from 'store/store';\r\n\r\nlet messages = [];\r\n\r\nexport default function connectSocket() {\r\n  const ws = new BrowserWebSocket('wss://render-ws-server.onrender.com');\r\n  // const ws = new BrowserWebSocket('ws://localhost:3000/');\r\n\r\n  ws.on('open', () => {\r\n    setTimeout(() => {\r\n      console.log('open', ws.ws.readyState);\r\n      store.dispatch({ type: 'status', value: ws.ws.readyState });\r\n    }, 300);\r\n  });\r\n  ws.on('close', () => {\r\n    console.log('connection closed', ws.ws.readyState, 'reconnecting');\r\n    store.dispatch({ type: 'status', value: ws.ws.readyState });\r\n    ws.reconnect();\r\n  })\r\n  ws.on('message', event => {\r\n    const mes = JSON.parse(event.data).splice(0, 100).reverse();\r\n    if (mes.length === 1) {\r\n      const newMes = `${mes[0].from}: ${mes[0].message}`;\r\n      messages.push(mes[0])\r\n      store.dispatch({ type: 'newMessage', value: newMes });\r\n      store.dispatch({ type: 'messages', value: mes });\r\n    } else {\r\n      if (messages.length === 0) {\r\n        messages = mes;\r\n        store.dispatch({ type: 'messages', value: mes });\r\n      }\r\n    }\r\n\r\n    const div = document.getElementById('messages-area');\r\n    if (div) {\r\n      setTimeout(() => {\r\n        div.scrollTo({ top: div.scrollHeight - div.clientHeight, behavior: 'smooth' });\r\n      }, 50);\r\n    }\r\n  });\r\n\r\n  return ws;\r\n}","import React from 'react';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport theme from 'theme/theme';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport store from 'store/store';\r\n\r\nconst CustomSwitch = withStyles({\r\n  switchBase: {\r\n    color: theme.palette.golden.dark,\r\n    '&$checked': {\r\n      color: theme.palette.primary.main,\r\n    },\r\n    '&$checked + $track': {\r\n      backgroundColor: theme.palette.primary.dark,\r\n    },\r\n  },\r\n  checked: {},\r\n  track: {},\r\n})(Switch);\r\n\r\nexport default function Switcher(props) {\r\n  const [state, setState] = React.useState({\r\n    checked: props.ignore,\r\n  });\r\n\r\n  const handleChange = name => event => {\r\n    setState({ ...state, [name]: event.target.checked });\r\n    store.dispatch({ type: 'switch', value: event.target.checked });\r\n  };\r\n\r\n  return (\r\n    <FormControlLabel\r\n      control={\r\n        <CustomSwitch\r\n          checked={state.checked}\r\n          onChange={handleChange('checked')}\r\n          value=\"checked\"\r\n        />\r\n      }\r\n      label=\"Notifications\"\r\n    />\r\n  );\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport MyIconButton from 'components/buttons/iconButtons';\r\nimport Icon from '@material-ui/core/Icon';\r\nimport SignalCellularConnectedNoInternet0BarIcon from '@material-ui/icons/SignalCellularConnectedNoInternet0Bar';\r\n\r\nexport default function Status(props) {\r\n  return (\r\n    <div className=\"status-block\">\r\n      {props.status === 1 ?\r\n        <MyIconButton\r\n          onClickHandler={() => undefined}\r\n          theme=\"success\"\r\n          icon={<Icon>checkIcon</Icon>}\r\n        /> :\r\n        <><span>reconnecting</span>\r\n          <MyIconButton\r\n            onClickHandler={() => undefined}\r\n            theme=\"fail\"\r\n            icon={<SignalCellularConnectedNoInternet0BarIcon />}\r\n          />\r\n        </>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nStatus.propTypes = {\r\n  status: PropTypes.number.isRequired\r\n};\r\n","/* eslint-disable consistent-return */\r\n/* eslint-disable array-callback-return */\r\n/* eslint-disable class-methods-use-this */\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport store from 'store/store';\r\nimport { replaceSmileWithUnicode } from 'components/functions';\r\nimport TextChatItem from 'components/chatItems/textChatItem';\r\nimport SmileChatItem from 'components/chatItems/smileChatItem';\r\nimport ChatInput from 'components/ChatInput/ChatInput';\r\nimport connectSocket from 'components/functions/mySocket';\r\nimport Switcher from 'components/buttons/switcher';\r\nimport Status from 'components/wsStatus/wsStatus';\r\n\r\nclass Chat extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {};\r\n    this.mounted = false;\r\n    this.ws = connectSocket();\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n    const div = document.getElementById('messages-area');\r\n    setTimeout(() => {\r\n      if (div) {\r\n        div.scrollTo({ top: div.scrollHeight - div.clientHeight, behavior: 'instant' });\r\n      }\r\n    }, 1500);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  submitClickHandler() {\r\n    const mess = {\r\n      from: this.props.login,\r\n      message: replaceSmileWithUnicode($('#inputChat').html())\r\n    };\r\n    this.ws.emit(JSON.stringify(mess));\r\n    $('#inputChat').text('');\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"row chat-page justify-content-center align-items-center\"\r\n        onClick={() => store.dispatch({ type: 'activeInput', value: false })}\r\n        role=\"button\"\r\n        onKeyPress={undefined}\r\n        tabIndex=\"-1\"\r\n      >\r\n        <div className=\"switcher\">\r\n          <Switcher ignore={this.props.switch} />\r\n          <Status status={this.props.status} />\r\n        </div>\r\n        <div className=\"row chat-page-messages\">\r\n          <div id=\"messages-area\" className=\"messages-wrapper\">\r\n            {this.props.messages.map(item => {\r\n              if (item && item.message) {\r\n                if (item.message.match(/:\\w+:/gm)) {\r\n                  return <SmileChatItem key={item.id} login={this.props.login} messagePack={item} />;\r\n                }\r\n                return <TextChatItem key={item.id} login={this.props.login} messagePack={item} />;\r\n              }\r\n            })}\r\n          </div>\r\n        </div>\r\n        <ChatInput submitClickHandler={() => {\r\n          if (this.props.status === 1) {\r\n            this.submitClickHandler();\r\n          }\r\n        }\r\n        } />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nChat.propTypes = {\r\n  login: PropTypes.string.isRequired,\r\n  status: PropTypes.number.isRequired,\r\n  messages: PropTypes.array.isRequired,\r\n  switch: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]).isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  login: state.login,\r\n  status: state.status,\r\n  messages: state.messages,\r\n  switch: state.switch\r\n});\r\nexport default connect(mapStateToProps)(Chat);\r\n","import React, { Component } from 'react';\r\nimport { HashRouter as Router, Route, Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport Header from 'components/header/header';\r\nimport MainPage from 'containers/mainPage/mainPage';\r\nimport Footer from 'components/footer';\r\nimport Chat from 'containers/chatPage/chatPage';\r\nimport store from 'store/store';\r\nimport $ from 'jquery';\r\nimport Notifications from 'components/Notifications/notif';\r\n\r\nclass App extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {};\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <div className=\"container-fluid\"\r\n          onClick={(e) => {\r\n            const input = $('#changeNameInput');\r\n            if ($(e.target).is('.container-fluid') || $(e.target).is('.header')) {\r\n              if (input) {\r\n                store.dispatch({ type: 'activeInput', value: false });\r\n              }\r\n            }\r\n          }}>\r\n          <Header />\r\n          <Route exact path=\"/\">\r\n            {this.props.login && this.props.login !== 'Guest' && this.props.redirect ? <Redirect to=\"/chat\" /> : <Redirect to=\"/\" />}\r\n          </Route>\r\n          <Route exact path=\"/chat\">\r\n            {this.props.login && this.props.login !== 'Guest' && this.props.redirect ? <Redirect to=\"/chat\" /> : <Redirect to=\"/\" />}\r\n          </Route>\r\n          <Route path=\"/\" exact component={MainPage} />\r\n          <Route path=\"/chat\" component={Chat} />\r\n          <Footer />\r\n          <Notifications />\r\n        </div>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nApp.propTypes = {\r\n  login: PropTypes.string.isRequired,\r\n  redirect: PropTypes.bool.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({ login: state.login, redirect: state.redirect });\r\nexport default connect(mapStateToProps)(App);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport './styles/index.css';\r\nimport App from 'app';\r\nimport store from 'store/store';\r\n\r\nlet vh = window.innerHeight * 0.01;\r\ndocument.documentElement.style.setProperty('--vh', `${vh}px`);\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n","import { createStore } from 'redux';\r\n\r\nlet switchOption;\r\n\r\nif (JSON.parse(localStorage.getItem('switch')) === undefined || JSON.parse(localStorage.getItem('switch')) === null) {\r\n  switchOption = true;\r\n  localStorage.setItem('switch', true);\r\n} else {\r\n  switchOption = JSON.parse(localStorage.getItem('switch'))\r\n}\r\n\r\nconst initialState = {\r\n  login: localStorage.getItem('login') || 'Guest',\r\n  messages: ['loading'],\r\n  activeInput: false,\r\n  status: 3,\r\n  newMessage: localStorage.getItem('newMes') || 'new message!',\r\n  switch: switchOption,\r\n  redirect: true\r\n};\r\n\r\nlet mesAll = [];\r\n\r\nfunction appState(state = initialState, action) {\r\n  switch (action.type) {\r\n    case 'login':\r\n      localStorage.setItem('login', action.value);\r\n      return Object.assign({}, state, {\r\n        login: action.value\r\n      });\r\n    case 'redirect':\r\n      return Object.assign({}, state, {\r\n        redirect: action.value\r\n      });\r\n    case 'switch':\r\n      localStorage.setItem('switch', action.value);\r\n      return Object.assign({}, state, {\r\n        switch: action.value\r\n      });\r\n    case 'newMessage':\r\n      return Object.assign({}, state, {\r\n        newMessage: action.value\r\n      });\r\n    case 'messages':\r\n      if (typeof action.value === 'object') {\r\n        for (const message in action.value) {\r\n          mesAll.push(action.value[message]);\r\n        }\r\n      }\r\n      return Object.assign({}, state, {\r\n        messages: [...mesAll]\r\n      });\r\n    case 'activeInput':\r\n      return Object.assign({}, state, {\r\n        activeInput: action.value\r\n      });\r\n    case 'status':\r\n      return Object.assign({}, state, {\r\n        status: action.value\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst store = createStore(appState);\r\n\r\nexport default store;\r\n","module.exports = __webpack_public_path__ + \"static/media/sound.13620510.mp3\";"],"sourceRoot":""}